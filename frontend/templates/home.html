<!doctype html>
{% load static %}
<html lang="{{ meta.lang|default:'en' }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=1280, initial-scale=1">
    <title>{{ meta.title|default:"LinkHash | Web3 SEO Rewards" }}</title>
    <link rel="canonical" href="{{ meta.canonical|default:meta.url }}">
    <meta name="robots" content="index,follow">
    <meta name="author" content="LinkHash">
    <meta name="description" content="{{ meta.description|default:'Data-driven backlinks & web3 rewards platform.' }}">
    <!-- OG/Twitter -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="LinkHash">
    <meta property="og:title" content="{{ meta.og_title|default:meta.title }}">
    <meta property="og:description" content="{{ meta.og_description|default:meta.description }}">
    <meta property="og:url" content="{{ meta.url }}">
    <meta property="og:image" content="{% static 'img/og-cover.png' %}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ meta.og_title|default:meta.title }}">
    <meta name="twitter:description" content="{{ meta.og_description|default:meta.description }}">
    <meta name="twitter:image" content="{% static 'img/twitter-card.png' %}">
    <!-- Favicons -->
    <link rel="icon" href="{% static 'img/favicon.ico' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'img/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'img/favicon-16x16.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'img/apple-touch-icon.png' %}">
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.css" crossorigin="anonymous" referrerpolicy="no-referrer">

    <style>
      /* ======= THEME ======= */
      :root{
        --bg:#0a0b0d; --bg-elev:#0f1115; --panel:#11141a; --panel-2:#0e1318; --grid:#0b0f13; --line:#1a212d;
        --text:#e6f1ee; --muted:#9fb0aa; --green:#16a34a; --green-2:#23d16a;
        --glow:0 0 22px rgba(22,163,74,.35), 0 0 48px rgba(22,163,74,.15);
        --radius:16px; --shadow-lg:0 40px 80px rgba(0,0,0,.55), inset 0 -1px 0 rgba(255,255,255,.03);
        --shadow-md:0 16px 40px rgba(0,0,0,.45);
        --noise:transparent url('data:image/svg+xml;utf8,\
          <svg xmlns="http://www.w3.org/2000/svg" width=\"120\" height=\"120\" viewBox=\"0 0 120 120\">\
          <filter id=\"n\"><feTurbulence type=\"fractalNoise\" baseFrequency=\"0.9\" numOctaves=\"2\" stitchTiles=\"stitch\"/></filter>\
          <rect width=\"120\" height=\"120\" filter=\"url(%23n)\" opacity=\".04\"/></svg>') repeat;
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0; color:var(--text);
        background:
          radial-gradient(80rem 60rem at 90% -10%, rgba(22,163,74,.12), transparent 60%),
          radial-gradient(60rem 40rem at -20% 20%, rgba(35,209,106,.08), transparent 60%),
          linear-gradient(180deg, #08090b, #0a0b0d 20%, #090c10);
        font-family: ui-sans-serif, "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                     "Apple SD Gothic Neo", "Noto Sans KR", "Noto Sans JP", "Noto Sans SC", Arial, sans-serif;
        letter-spacing:.2px;
        background-attachment: fixed;
      }
      a{color:inherit;text-decoration:none}
      .container{width:1200px; margin:0 auto; padding:0 20px;}

      /* ===== NAV ===== */
      .nav{
        position:sticky; top:0; z-index:60; backdrop-filter: blur(10px);
        background:linear-gradient(180deg, rgba(15,17,21,.65), rgba(15,17,21,.35));
        border-bottom:1px solid rgba(255,255,255,.06);
      }
      .nav .row{display:flex; align-items:center; justify-content:space-between; height:72px;}
      .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.4px; color:#d8ffe7; text-shadow:0 0 18px rgba(35,209,106,.24);}
      .brand .dot{width:10px;height:10px;border-radius:999px;background:var(--green);box-shadow:var(--glow)}
      .nav .links{display:flex; gap:24px; align-items:center;}
      .nav .links a{color:#cfe7dd; opacity:.9}
      .nav .links a:hover{color:#fff; text-shadow:0 0 12px rgba(35,209,106,.25)}
      .btn{display:inline-flex; align-items:center; gap:10px; padding:12px 16px; font-weight:700; border-radius:12px; background:linear-gradient(180deg,#19b357,#119e49); color:#05160c; box-shadow:var(--glow); border:1px solid #2fe07a}
      .btn-outline{padding:10px 14px; border-radius:12px; border:1px solid #2a333f; background: rgba(14,18,25,.6); color:#d9f6e6}

      /* ===== HERO ===== */
      .hero{position:relative; overflow:hidden; border-bottom:1px solid rgba(255,255,255,.06);}
      .hero::before{
        content:""; position:absolute; inset:-10%; background:
          radial-gradient(70rem 40rem at 20% -10%, rgba(22,163,74,.18), transparent 60%),
          radial-gradient(60rem 40rem at 120% 10%, rgba(22,163,74,.10), transparent 60%);
        filter: blur(40px); z-index:0; opacity:.6;
      }
      .hero .container{height:520px; display:flex; align-items:center; position:relative; z-index:1;}
      .hero h1{font-size:54px; line-height:1.12; margin:0 0 14px; letter-spacing:0.4px;}
      .hero p{color:var(--muted); font-size:18px; margin:0 0 28px;}
      .hero .cta{display:flex; gap:14px;}
      .hero .badge{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:rgba(22,163,74,.14); border:1px solid rgba(35,209,106,.35); color:#aef2c9; font-weight:700; margin-bottom:16px;}

      /* ===== HOW IT WORKS ===== */
      .how{border-top:1px solid rgba(255,255,255,.06); border-bottom:1px solid rgba(255,255,255,.06); background:linear-gradient(180deg, rgba(12,16,20,.65), rgba(10,12,16,.65)), var(--noise);}
      .steps{display:flex; flex-direction:column; gap:38px; padding:40px 0;}
      .step{display:grid; grid-template-columns:1.1fr 1fr; gap:22px; align-items:center; min-height:72vh;}
      .step h3{font-size:28px; margin:0 0 10px;}
      .step p{margin:0; color:#b4c5bf}

      /* Noticeable reveal animations */
      .reveal{opacity:0; transform:translateY(36px); transition:opacity .55s ease, transform .55s cubic-bezier(.22,.87,.31,1);}
      .reveal.in{opacity:1; transform:none;}
      .mini{
        border:1px solid rgba(255,255,255,.08); border-radius:16px;
        background:linear-gradient(180deg, #0f1419, #0c1116); box-shadow:var(--shadow-md);
        overflow:hidden; opacity:0; transform:translateY(36px) scale(.92);
        transition:opacity .65s ease, transform .65s cubic-bezier(.2,1,.22,1);
      }
      .mini.in{opacity:1; transform:none;}
      .mini.pop{animation:popIn .7s cubic-bezier(.2,1,.22,1) both;}
      @keyframes popIn{
        0%{opacity:0; transform:translateY(42px) scale(.9)}
        60%{opacity:1; transform:translateY(-4px) scale(1.02)}
        100%{opacity:1; transform:translateY(0) scale(1)}
      }

      .mini .chrome{display:flex; align-items:center; gap:6px; height:36px; padding:0 12px; border-bottom:1px solid rgba(255,255,255,.06); background:rgba(14,18,25,.65);}
      .dot{width:10px; height:10px; border-radius:999px; background:#334050;}
      .dot.red{background:#ff6b6b} .dot.yellow{background:#ffd166} .dot.green{background:#06d6a0}
      .mini .body{padding:16px;}

      /* mini: APPLY form (enriched) */
      .mini .form-row{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:10px;}
      .mini label{display:block; font-weight:700; font-size:12px; margin:0 0 6px; color:#d0e6dc}
      .mini input, .mini select, .mini .fake-input{width:100%; padding:10px 12px; border:1px solid #2a333f; border-radius:10px; background:#0b1117; color:#e6f1ee; font-size:13px;}
      .mini .fake-chip{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid #1d2836; background:#0b1218; color:#cde6da; font-size:12px; margin-right:6px;}
      .mini .preview-actions{display:flex; justify-content:flex-end; gap:8px; margin-top:12px;}

      /* mini: REWARDS list (enriched, with thumbs) */
      .mini .grid{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
      .mini .card{background:#0b1117; border:1px solid #1d2836; border-radius:12px; padding:12px;}
      .mini .card h4{margin:0 0 6px; font-size:14px;}
      .mini .card p{margin:0 0 8px; color:#9fb0aa; font-size:12px;}
      .mini .thumb{height:88px; border-radius:8px; overflow:hidden; background:#0b1117; margin-bottom:8px;}
      .mini .thumb img{width:100%; height:100%; object-fit:cover; display:block; opacity:.95}
      .mini .pill{background:#0b1218; border:1px solid #1d2836; border-radius:10px; padding:6px 8px; font-size:11px; color:#cde6da; display:inline-flex; align-items:center; gap:6px;}
      .mini .progress{height:8px; background:#0b1218; border:1px solid #1d2836; border-radius:999px; overflow:hidden; margin-top:6px;}
      .mini .bar{height:100%; width:0; background:linear-gradient(90deg,#19b357,#23d16a); box-shadow:var(--glow)}
      .mini .tags{display:flex; gap:6px; flex-wrap:wrap; margin-top:6px;}
      .mini .tag{padding:4px 8px; border-radius:999px; border:1px solid #22303e; background:#0a1117; color:#c7e8d9; font-size:11px;}

      /* mini: REWARD DETAILS (enriched) */
      .mini .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}

      /* ===== EXPLAINER CARDS ===== */
      .section{padding:88px 0; background:linear-gradient(180deg, rgba(12,16,20,.65), rgba(10,12,16,.65)), var(--noise);}
      .section h2{font-size:36px; margin:0 0 12px;}
      .section p.lead{color:#9fb0aa; margin:0 0 28px;}
      .cards{display:grid; grid-template-columns:repeat(3,1fr); gap:18px;}
      .card{background:linear-gradient(180deg, #0f1419, #0c1116); border:1px solid rgba(255,255,255,.06); border-radius:16px; box-shadow:var(--shadow-lg); padding:22px; transition:transform .15s ease, border-color .15s ease, box-shadow .15s ease;}
      .card:hover{transform:translateY(-3px); border-color:rgba(35,209,106,.35); box-shadow:0 40px 80px rgba(22,163,74,.18)}
      .card h3{margin:0 0 8px;}
      .card p{margin:0; color:#b9c9c3}
      .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;}
      .chip{padding:6px 10px; border-radius:999px; border:1px solid #22303e; background:#0a1117; color:#c7e8d9; font-size:12px; display:inline-flex; align-items:center; gap:6px;}

      /* ===== PROJECTS (CAROUSEL) ===== */
      .projects{padding:90px 0 110px; background:radial-gradient(90rem 50rem at -15% 10%, rgba(22,163,74,.10), transparent 60%), linear-gradient(180deg, #0a0d11, #0b0e12);}
      .projects h2{font-size:34px; margin:0 0 6px;}
      .projects .sub{color:#9fb0aa; margin:0 0 22px;}
      .project-card{width:360px; height:460px; display:flex; flex-direction:column; overflow:hidden; background:linear-gradient(180deg, #0d1217, #0b0f14); border:1px solid rgba(255,255,255,.06); border-radius:18px; box-shadow:var(--shadow-md);}
      .project-card .thumb{position:relative; height:190px; background:#0b1117; overflow:hidden;}
      .project-card .thumb img{width:100%; height:100%; object-fit:cover; display:block; opacity:.92; transform:scale(1.03)}
      .task-badges{position:absolute; left:12px; bottom:12px; display:flex; gap:8px;}
      .task-badge{padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700; background:rgba(14,18,25,.8); border:1px solid rgba(255,255,255,.08);}
      .task-badge.visit{color:#a0f2bd; border-color:#2a6f47}
      .task-badge.link{color:#b2f5ff; border-color:#2a455e}
      .project-card .body{flex:1; padding:16px 16px 14px; display:flex; flex-direction:column; gap:8px;}
      .project-card h3{font-size:18px; margin:0}
      .project-card p{color:#b7c8c1; font-size:14px; margin:0 0 6px}
      .meta{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:6px;}
      .meta .pill{background:#0b1218; border:1px solid #1d2836; border-radius:10px; padding:8px 10px; font-size:12px; color:#cde6da; display:flex; align-items:center; gap:8px;}
      .progress{height:8px; background:#0b1218; border:1px solid #1d2836; border-radius:999px; overflow:hidden; margin-top:6px;}
      .progress .bar{height:100%; width:0; background:linear-gradient(90deg,#19b357,#23d16a); box-shadow:var(--glow)}
      .project-card .foot{display:flex; justify-content:flex-end; margin-top:auto;}
      .project-card .foot .btn{padding:10px 12px;}
      .swiper{padding:8px}
      .swiper-slide{width:auto}

      .section-head{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:8px;}
      .more-link{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; font-weight:700; border:1px solid rgba(255,255,255,.08); background:rgba(14,18,25,.6); color:#d9f6e6}
      .more-link:hover{border-color:rgba(35,209,106,.35); box-shadow:0 0 16px rgba(35,209,106,.18)}

      /* ===== FOOTER ===== */
      .footer{padding:28px 0; border-top:1px solid rgba(255,255,255,.06); color:#a7b9b1; background:#0a0c10;}

      /* Desktop-first */
      @media (max-width:1140px){ .container{width:1000px} }
      @media (max-width:1000px){
        .container{width:920px}
        .step{grid-template-columns:1fr; min-height:auto;}
      }
        /* ===== Language dropdown (nav) ===== */
    .lang{ position:relative; margin-left:8px; }
    .lang-btn{
    display:inline-flex; align-items:center; gap:10px;
    padding:10px 12px; font-weight:700; border-radius:12px;
    border:1px solid #2a333f; background: rgba(14,18,25,.6); color:#d9f6e6;
    cursor:pointer;
    }
    .lang-btn:hover{ border-color:rgba(35,209,106,.35); box-shadow:0 0 16px rgba(35,209,106,.18) }
    .lang .chev{ opacity:.8 }

    .lang-menu{
    position:absolute; top:110%; right:0; width:210px;
    background:linear-gradient(180deg, #0f1419, #0c1116);
    border:1px solid rgba(255,255,255,.08);
    border-radius:12px; box-shadow:0 20px 40px rgba(0,0,0,.45);
    padding:6px; display:none; z-index:70;
    }
    .lang.open .lang-menu{ display:block; animation:menuIn .14s ease-out }
    @keyframes menuIn{ from{ transform:translateY(-6px); opacity:0 } to{ transform:translateY(0); opacity:1 } }

    .lang-item{
    display:flex; align-items:center; gap:10px; padding:10px 10px; border-radius:10px;
    cursor:pointer; color:#cfe7dd; font-weight:700;
    }
    .lang-item:hover{ background:#0b1218; border:1px solid #1d2836 }
    .flag{
    width:18px; height:18px; border-radius:3px; display:inline-block; overflow:hidden;
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
    background: linear-gradient(180deg, #22303e, #10161c);
    }
    .lang-btn .flag{
    /* Dynamic via JS; placeholder tone so layout doesn't shift */
    }

    /* Minimal “flags” using gradients—no network requests */
    /* Minimal “flags” using gradients—no network requests */
    .flag-emoji{
    display:inline-flex; align-items:center; justify-content:center;
    width:18px; height:18px; line-height:18px;
    font-size:14px; border-radius:3px;
    background:rgba(255,255,255,.06);
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
    }
    /* Make sure it stays aligned in your existing flex row */
    .links{ display:flex; gap:24px; align-items:center; }

      .empty-wrap{
    padding:18px; border:1px solid rgba(255,255,255,.08);
    border-radius:14px; background:linear-gradient(180deg,#0f1419,#0c1116);
    color:#b4c5bf; display:flex; align-items:center; justify-content:space-between; gap:12px;
  }
  .empty-wrap .msg{font-size:14px}
  .empty-wrap .hint{opacity:.75; font-size:12px}

    </style>
  </head>
  <body>
    <!-- ===== NAV ===== -->
    <header class="nav">
        <div class="container row">
            <div class="brand"><span class="dot"></span><span>LinkHash</span></div>

            <nav class="links">
            <!-- Left: same 4 links + Apply -->
            <a href="{% if meta.lang == 'ko' %}/ko/{% elif meta.lang == 'ja' %}/ja/{% elif meta.lang == 'zh' %}/zh/{% else %}/{% endif %}"
                style="font-weight:700;color:#d8ffe7">
                {% if meta.lang == 'ko' %}홈{% elif meta.lang == 'ja' %}ホーム{% elif meta.lang == 'zh' %}主页{% else %}Home{% endif %}
            </a>

            <a href="{% if meta.lang == 'ko' %}/ko/rewards/{% elif meta.lang == 'ja' %}/ja/rewards/{% elif meta.lang == 'zh' %}/zh/rewards/{% else %}/rewards/{% endif %}">
                {% if meta.lang == 'ko' %}리워드{% elif meta.lang == 'ja' %}リワード{% elif meta.lang == 'zh' %}奖励{% else %}Rewards{% endif %}
            </a>

            <a href="{% if meta.lang == 'ko' %}/ko/events/{% elif meta.lang == 'ja' %}/ja/events/{% elif meta.lang == 'zh' %}/zh/events/{% else %}/events/{% endif %}">
                {% if meta.lang == 'ko' %}이벤트{% elif meta.lang == 'ja' %}イベント{% elif meta.lang == 'zh' %}活动{% else %}Events{% endif %}
            </a>

            <a href="{% if meta.lang == 'ko' %}/ko/leaderboard/{% elif meta.lang == 'ja' %}/ja/leaderboard/{% elif meta.lang == 'zh' %}/zh/leaderboard/{% else %}/leaderboard/{% endif %}">
                {% if meta.lang == 'ko' %}리더보드{% elif meta.lang == 'ja' %}リーダーボード{% elif meta.lang == 'zh' %}排行榜{% else %}Leaderboard{% endif %}
            </a>

            <a class="btn-outline" href="{% if meta.lang == 'ko' %}/rewards/apply/ko/{% elif meta.lang == 'ja' %}/rewards/apply/ja/{% elif meta.lang == 'zh' %}/rewards/apply/zh/{% else %}/rewards/apply/{% endif %}">
                {% if meta.lang == 'ko' %}캠페인 신청{% elif meta.lang == 'ja' %}キャンペーン申請{% elif meta.lang == 'zh' %}申请发起活动{% else %}Apply for campaign{% endif %}
            </a>

            <!-- Wallet button (unchanged) -->
            {% if wallet_user %}
                <span class="btn-outline">👛 {{ wallet_user.address|slice:":6" }}…{{ wallet_user.address|slice:"-4:" }}</span>
                <a class="btn" href="#" onclick="logoutWallet && logoutWallet();return false;">
                {% if meta.lang == 'ko' %}로그아웃{% elif meta.lang == 'ja' %}ダッシュボード{% elif meta.lang == 'zh' %}仪表盘{% else %}Logout{% endif %}
                </a>
            {% else %}
                <a class="btn" href="#" onclick="connectWallet && connectWallet();return false;">
                {% if meta.lang == 'ko' %}지갑 연결{% elif meta.lang == 'ja' %}ウォレット接続{% elif meta.lang == 'zh' %}连接钱包{% else %}Connect Wallet{% endif %}
                </a>
            {% endif %}

            <!-- NEW: Language dropdown (to the RIGHT of wallet button) -->
            <!-- NEW: Language dropdown (to the RIGHT of wallet button) -->
            <!-- NEW: Language dropdown (to the RIGHT of wallet button) -->
            <div class="lang" id="langSwitcher" data-current="{{ meta.lang|default:'en' }}">
            <button class="lang-btn" type="button" aria-haspopup="listbox" aria-expanded="false">
                <span class="flag-emoji" aria-hidden="true"></span>
                <span class="label">
                {% if meta.lang == 'ko' %}한국어{% elif meta.lang == 'ja' %}日本語{% elif meta.lang == 'zh' %}中文{% else %}English{% endif %}
                </span>
                <svg class="chev" viewBox="0 0 20 20" width="16" height="16" aria-hidden="true">
                <path d="M5 7l5 6 5-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <ul class="lang-menu" role="listbox" tabindex="-1" aria-label="Select language">
                <li class="lang-item" role="option" data-lang="en" data-flag="🇺🇸">🇺🇸 English</li>
                <li class="lang-item" role="option" data-lang="ko" data-flag="🇰🇷">🇰🇷 한국어</li>
                <li class="lang-item" role="option" data-lang="ja" data-flag="🇯🇵">🇯🇵 日本語</li>
                <li class="lang-item" role="option" data-lang="zh" data-flag="🇨🇳">🇨🇳 中文</li>
            </ul>
            </div>
            </nav>
        </div>
        </header>


    <!-- ===== HERO ===== -->
    <section class="hero">
      <div class="container">
        <div class="content">
          <div class="badge">Web3 · SEO · Rewards</div>
          <h1>
            {% if meta.lang == 'ko' %}
              커뮤니티에 보상이 돌아가는 <span style="color:#aaf5c7; text-shadow:var(--glow)">투명한 화이트햇</span> 캠페인으로 순위를 올리세요.
            {% elif meta.lang == 'ja' %}
              コミュニティに報酬が還元される<span style="color:#aaf5c7; text-shadow:var(--glow)">透明なホワイトハット</span>キャンペーンで順位を伸ばす。
            {% elif meta.lang == 'zh' %}
              通过<span style="color:#aaf5c7; text-shadow:var(--glow)">透明白帽</span>活动提升排名，让奖励回馈社区。
            {% else %}
              Boost rankings with <span style="color:#aaf5c7; text-shadow:var(--glow)">transparent, white-hat</span> campaigns that pay your community.
            {% endif %}
          </h1>
          <p>
            {% if meta.lang == 'ko' %}
              광고주는 USDT로 풀을 펀딩, 사용자는 방문/링크 과제를 수행합니다. 모든 수치가 공개됩니다.
            {% elif meta.lang == 'ja' %}
              広告主はUSDTでプールを資金化、ユーザーはVISIT/LINKタスクを実行。数値はすべて公開。
            {% elif meta.lang == 'zh' %}
              广告主用 USDT 注资奖励池，用户完成访问/外链任务；所有数据公开透明。
            {% else %}
              Advertisers fund pools in USDT. Users complete visit & link-share tasks. Everyone sees the numbers.
            {% endif %}
          </p>
          <div class="cta">
            <a class="btn" href="#projects">
              {% if meta.lang == 'ko' %}캠페인 둘러보기{% elif meta.lang == 'ja' %}キャンペーンを見る{% elif meta.lang == 'zh' %}查看活动{% else %}Explore Campaigns{% endif %}
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== HOW IT WORKS (with stronger animations & enriched previews) ===== -->
    <section class="how">
      <div class="container steps">
        <!-- Step 1: Apply -->
        <div class="step">
          <div class="reveal">
            <h3>1) {% if meta.lang == 'ko' %}클라이언트가 USDT 풀을 펀딩{% elif meta.lang == 'ja' %}クライアントがUSDTプールに資金投入{% elif meta.lang == 'zh' %}客户注资 USDT 奖励池{% else %}Client funds a USDT pool{% endif %}</h3>
            <p>
              {% if meta.lang == 'ko' %}
                예산과 기간을 선택하면 명확한 규칙(VISIT/LINK, 허용 링크, 가이드)을 공개합니다. 라이브 풀 규모도 함께 표시됩니다.
              {% elif meta.lang == 'ja' %}
                予算と期間を選び、明確なルール（VISIT/LINK、許可リンク、注意事項）を公開。ライブのプール残高も表示。
              {% elif meta.lang == 'zh' %}
                选择预算与周期，公开清晰规则（VISIT/LINK、可用平台、注意事项）并展示奖励池规模。
              {% else %}
                Choose budget & dates. We publish clear rules (platforms, links allowed, dos/don’ts) and show the live pool size.
              {% endif %}
            </p>
          </div>
          <div class="mini" aria-label="Apply mini preview">
            <div class="chrome"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
            <div class="body">
              <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;">
                <strong style="font-size:14px">{% if meta.lang == 'ko' %}캠페인 런칭 신청{% elif meta.lang == 'ja' %}キャンペーン申請{% elif meta.lang == 'zh' %}发起活动申请{% else %}Request a New Campaign{% endif %}</strong>
                <span class="fake-chip">Web3</span><span class="fake-chip">SEO</span><span class="fake-chip">{% if meta.lang == 'ko' %}화이트햇{% elif meta.lang == 'ja' %}ホワイトハット{% elif meta.lang == 'zh' %}白帽{% else %}White-hat{% endif %}</span>
              </div>
              <div class="form-row">
                <div>
                  <label>Email *</label>
                  <input placeholder="name@example.com" disabled>
                </div>
                <div>
                  <label>{% if meta.lang == 'ko' %}전화번호{% elif meta.lang == 'ja' %}電話番号{% elif meta.lang == 'zh' %}电话{% else %}Phone{% endif %} *</label>
                  <input placeholder="+82 10 1234 1234" disabled>
                </div>
              </div>
              <div class="form-row">
                <div>
                  <label>{% if meta.lang == 'ko' %}국가{% elif meta.lang == 'ja' %}国/地域{% elif meta.lang == 'zh' %}国家{% else %}Country{% endif %}</label>
                  <input placeholder="{% if meta.lang == 'ko' %}대한민국{% elif meta.lang == 'ja' %}日本{% elif meta.lang == 'zh' %}中国{% else %}South Korea{% endif %}" disabled>
                </div>
                <div>
                  <label>{% if meta.lang == 'ko' %}캠페인 제목{% elif meta.lang == 'ja' %}キャンペーン名{% elif meta.lang == 'zh' %}活动标题{% else %}Campaign Title{% endif %}</label>
                  <input placeholder="SimpleQuant Blog Launch" disabled>
                </div>
              </div>
              <div class="form-row">
                <div>
                  <label>URL</label>
                  <input placeholder="https://example.com" disabled>
                </div>
                <div>
                  <label>{% if meta.lang == 'ko' %}총 리워드 풀 (USDT){% elif meta.lang == 'ja' %}総プール (USDT){% elif meta.lang == 'zh' %}总奖励池 (USDT){% else %}Total Reward Pool (USDT){% endif %}</label>
                  <input placeholder="2500" disabled>
                </div>
              </div>
              <div class="preview-actions">
                <!-- Removed 'Open form' button per request -->
                <button class="btn" onclick="location.href='{% if meta.lang == 'ko' %}/rewards/apply/ko/{% elif meta.lang == 'ja' %}/rewards/apply/ja/{% elif meta.lang == 'zh' %}/rewards/apply/zh/{% else %}/rewards/apply/{% endif %}'">
                  {% if meta.lang == 'ko' %}신청하기{% elif meta.lang == 'ja' %}申請する{% elif meta.lang == 'zh' %}去申请{% else %}Apply now{% endif %}
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 2: Rewards list (with thumbnails & clearer copy) -->
        <div class="step">
          <div class="reveal">
            <h3>2) {% if meta.lang == 'ko' %}과제가 공개되고 검증{% elif meta.lang == 'ja' %}タスク公開と検証{% elif meta.lang == 'zh' %}任务上线并验证{% else %}Tasks go live & are verified{% endif %}</h3>
            <p>
              {% if meta.lang == 'ko' %}
                참여자는 <b>VISIT</b>(페이지에서 코드 찾기) 또는 <b>LINK</b>(리뷰+백링크) 미션을 선택합니다. 안티 스팸 + 리뷰로 화이트햇을 보장합니다.
              {% elif meta.lang == 'ja' %}
                参加者は<b>VISIT</b>（ページでコード発見）または<b>LINK</b>（レビュー＋被リンク）を選択。スパム対策と審査でホワイトハット運用。
              {% elif meta.lang == 'zh' %}
                参与者选择<b>VISIT</b>（在页面找代码）或<b>LINK</b>（评测＋外链）。反垃圾与审核确保白帽标准。
              {% else %}
                Contributors pick <b>VISIT</b> (find a code) or <b>LINK</b> (review + backlink). Anti-spam & review keep it white-hat.
              {% endif %}
            </p>
          </div>
          <div class="mini" aria-label="Rewards list mini preview">
            <div class="chrome"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
            <div class="body">
              <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;">
                <strong style="font-size:14px">{% if meta.lang == 'ko' %}캠페인 목록{% elif meta.lang == 'ja' %}キャンペーン一覧{% elif meta.lang == 'zh' %}活动列表{% else %}Campaigns{% endif %}</strong>
                <div class="tags">
                  <span class="tag">VISIT</span><span class="tag">LINK</span><span class="tag">{% if meta.lang == 'ko' %}즉시 보상{% elif meta.lang == 'ja' %}即時{% elif meta.lang == 'zh' %}即时{% else %}Instant{% endif %}</span>
                </div>
              </div>
              <div class="grid">
                <!-- VISIT sample -->
                <div class="card">
                  <div class="thumb">
                    <img src="{% static 'img/cards/green-office.jpg' %}" onerror="this.src='https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=1200&auto=format&fit=crop'" alt="">
                  </div>
                  <h4>SimpleQuant: Blog launch</h4>
                  <p>
                    {% if meta.lang == 'ko' %}
                      <strong>VISIT – 코드 찾기:</strong> 지정된 페이지 하단/FAQ에 <code>CODE: X6K9Q2</code> 같은 문구가 있습니다. 페이지를 읽고 코드를 찾아 제출하면 자동으로 검증됩니다.
                    {% elif meta.lang == 'ja' %}
                      <strong>VISIT – コード発見:</strong> 指定ページのフッター/FAQに <code>CODE: X6K9Q2</code> のような文字列があります。ページを確認し、見つけたコードを提出すると自動検証されます。
                    {% elif meta.lang == 'zh' %}
                      <strong>VISIT – 找代码：</strong> 指定页面底部/FAQ 会有形如 <code>CODE: X6K9Q2</code> 的字样。阅读页面后找到并提交代码，系统自动验证。
                    {% else %}
                      <strong>VISIT – Find a code:</strong> The target page shows a token like <code>CODE: X6K9Q2</code> (often in the footer/FAQ). Read, find it, submit — verified automatically.
                    {% endif %}
                  </p>
                  <div class="row">
                    <span class="pill"><strong>{% if meta.lang == 'ko' %}풀{% elif meta.lang == 'ja' %}プール{% elif meta.lang == 'zh' %}奖励池{% else %}Pool{% endif %}</strong>&nbsp;2,000 USDT</span>
                    <span class="pill"><strong>{% if meta.lang == 'ko' %}참여자{% elif meta.lang == 'ja' %}人数{% elif meta.lang == 'zh' %}参与者{% else %}People{% endif %}</strong>&nbsp;842</span>
                  </div>
                  <div class="progress"><div class="bar" style="width:63%"></div></div>
                </div>

                <!-- LINK sample -->
                <div class="card">
                  <div class="thumb">
                    <img src="{% static 'img/cards/bitcoin-close.jpg' %}" onerror="this.src='https://images.unsplash.com/photo-1516245834210-c4c142787335?q=80&w=1200&auto=format&fit=crop'" alt="">
                  </div>
                  <h4>Naver review sprint</h4>
                  <p>
                    {% if meta.lang == 'ko' %}
                      <strong>LINK – 리뷰+백링크:</strong> Naver/블로그/인스타 등 허용 플랫폼에 진정성 있는 리뷰를 작성하고, 캠페인 페이지로 <em>dofollow</em> 링크를 삽입합니다. 스팸/복붙/무관 키워드는 불가.
                    {% elif meta.lang == 'ja' %}
                      <strong>LINK – レビュー＋被リンク:</strong> Naver/ブログ/Instagramなど許可プラットフォームで誠実なレビューを投稿し、キャンペーンページへ<em>dofollow</em>リンクを付与。スパム/コピペ/無関係キーワードは不可。
                    {% elif meta.lang == 'zh' %}
                      <strong>LINK – 评测＋外链：</strong> 在 Naver/博客/Instagram 等允许平台发布真实评测，并附上指向活动页的 <em>dofollow</em> 外链。禁止垃圾/抄袭/不相关关键词。
                    {% else %}
                      <strong>LINK – Review + backlink:</strong> Publish a genuine review on approved platforms (e.g., Naver, blogs, Instagram) and include a <em>dofollow</em> link back to the campaign. No spam/copy-paste/off-topic keywords.
                    {% endif %}
                  </p>
                  <div class="row">
                    <span class="pill"><strong>{% if meta.lang == 'ko' %}풀{% elif meta.lang == 'ja' %}プール{% elif meta.lang == 'zh' %}奖励池{% else %}Pool{% endif %}</strong>&nbsp;5,000 USDT</span>
                    <span class="pill"><strong>{% if meta.lang == 'ko' %}참여자{% elif meta.lang == 'ja' %}人数{% elif meta.lang == 'zh' %}参与者{% else %}People{% endif %}</strong>&nbsp;412</span>
                  </div>
                  <div class="progress"><div class="bar" style="width:40%"></div></div>
                </div>
              </div>

              <div class="preview-actions" style="margin-top:10px;">
                <button class="btn" onclick="location.href='{% if meta.lang == 'ko' %}/ko/rewards/{% elif meta.lang == 'ja' %}/ja/rewards/{% elif meta.lang == 'zh' %}/zh/rewards/{% else %}/rewards/{% endif %}'">
                  {% if meta.lang == 'ko' %}캠페인 더 보기{% elif meta.lang == 'ja' %}もっと見る{% elif meta.lang == 'zh' %}查看更多{% else %}Browse campaigns{% endif %}
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 3: Reward details -->
        <div class="step">
          <div class="reveal">
            <h3>3) {% if meta.lang == 'ko' %}검증 후 즉시 보상{% elif meta.lang == 'ja' %}検証後すぐに報酬{% elif meta.lang == 'zh' %}验证通过即刻发放{% else %}Rewards claimed instantly{% endif %}</h3>
            <p>
              {% if meta.lang == 'ko' %}
                승인된 액션마다 USDT가 지급됩니다. 풀 잔액, 참여자 수, 클레임률 등 모든 진행 상황이 공개됩니다.
              {% elif meta.lang == 'ja' %}
                承認されたアクションごとにUSDT支払い。残高・参加者・クレーム率など進行状況はすべて公開。
              {% elif meta.lang == 'zh' %}
                每次通过的提交都会从奖励池即时支付 USDT。剩余池、参与人数、领取率等进度公开透明。
              {% else %}
                Every approved action pays from the pool in USDT. Pool left, participants, claim % — all public for trust.
              {% endif %}
            </p>
          </div>
          <div class="mini" aria-label="Reward details mini preview">
            <div class="chrome"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
            <div class="body">
              <h4 style="margin:0 0 6px;">SimpleQuant: Blog launch</h4>
              <p style="margin:0 0 10px; color:#9fb0aa">{% if meta.lang == 'ko' %}아티클 하단 코드 제출로 보상{% elif meta.lang == 'ja' %}記事末尾のコード提出で報酬{% elif meta.lang == 'zh' %}文章底部提交代码即可领奖{% else %}Submit the code at the end of the article to earn{% endif %}</p>
              <div class="row">
                <span class="pill"><strong>{% if meta.lang == 'ko' %}풀{% elif meta.lang == 'ja' %}プール{% elif meta.lang == 'zh' %}奖励池{% else %}Pool{% endif %}</strong>&nbsp; 2,000&nbsp;USDT</span>
                <span class="pill"><strong>{% if meta.lang == 'ko' %}참여자{% elif meta.lang == 'ja' %}人数{% elif meta.lang == 'zh' %}参与者{% else %}People{% endif %}</strong>&nbsp; 842</span>
              </div>
              <div class="progress" style="margin-top:8px;"><div class="bar" style="width:63%"></div></div>
              <div style="display:flex; justify-content:space-between; font-size:12px; color:#9fb0aa; margin-top:6px;">
                <span>63% {% if meta.lang == 'ko' %}클레임{% elif meta.lang == 'ja' %}達成{% elif meta.lang == 'zh' %}已领取{% else %}claimed{% endif %}</span>
                <span>2025-09-01 → 2025-10-31</span>
              </div>
              <div class="preview-actions" style="margin-top:10px;">
                <button class="btn" onclick="location.href='{% if meta.lang == 'ko' %}/rewards/{% elif meta.lang == 'ja' %}/ja/rewards/{% elif meta.lang == 'zh' %}/zh/rewards/{% else %}/rewards/{% endif %}'">
                  {% if meta.lang == 'ko' %}세부 보기{% elif meta.lang == 'ja' %}詳細を見る{% elif meta.lang == 'zh' %}查看详情{% else %}View details{% endif %}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== EXPLAINERS ===== -->
    <section id="explain" class="section">
      <div class="container">
        <h2>
          {% if meta.lang == 'ko' %}광고주와 참여자를 위한 하나의 투명한 시스템{% elif meta.lang == 'ja' %}広告主と参加者のための単一で透明な仕組み{% elif meta.lang == 'zh' %}面向广告主与参与者的一体化透明系统{% else %}Built for two sides — one transparent system{% endif %}
        </h2>
        <p class="lead">
          {% if meta.lang == 'ko' %}데이터 기반 배치, 보이는 진행 상황, 그리고 참여가 즐거운 UX{% elif meta.lang == 'ja' %}データ駆動の配置、見える進捗、参加したくなるUX{% elif meta.lang == 'zh' %}数据驱动投放、公开进度、让人乐于参与的体验{% else %}Data-driven placements, visible progress, and playful UX so people actually enjoy participating.{% endif %}
        </p>
        <div class="cards">
          <div class="card">
            <h3>{% if meta.lang == 'ko' %}광고주용{% elif meta.lang == 'ja' %}広告主向け{% elif meta.lang == 'zh' %}面向广告主{% else %}For Advertisers{% endif %}</h3>
            <p>{% if meta.lang == 'ko' %}선별된 배치, 라이브 진행, 상세 리포트로 안전한 링크 구축을 시작하세요.{% elif meta.lang == 'ja' %}厳選配置・ライブ進捗・詳細レポートで安全なリンク構築を。{% elif meta.lang == 'zh' %}精选投放、实时进度、详细报告，安全开展外链建设。{% else %}Launch safe link-building with curated placements, live progress & detailed reports.{% endif %}</p>
            <div class="chips">
              <span class="chip">White-hat</span>
              <span class="chip">{% if meta.lang == 'ko' %}주제 적합{% elif meta.lang == 'ja' %}トピック適合{% elif meta.lang == 'zh' %}主题匹配{% else %}Topical fit{% endif %}</span>
              <span class="chip">{% if meta.lang == 'ko' %}투명성{% elif meta.lang == 'ja' %}透明性{% elif meta.lang == 'zh' %}透明{% else %}Transparent{% endif %}</span>
            </div>
          </div>
          <div class="card">
            <h3>{% if meta.lang == 'ko' %}참여자용{% elif meta.lang == 'ja' %}参加者向け{% elif meta.lang == 'zh' %}面向参与者{% else %}For Contributors{% endif %}</h3>
            <p>{% if meta.lang == 'ko' %}VISIT/LINK 과제를 수행하고 USDT를 받으세요. 규칙은 공개되어 간단합니다.{% elif meta.lang == 'ja' %}VISIT/LINKタスクを実行してUSDTを獲得。ルールは公開・シンプル。{% elif meta.lang == 'zh' %}完成 VISIT/LINK 任务领取 USDT。规则公开且简单。{% else %}Complete visit/link tasks; earn USDT from the pool. Rules are public and easy.{% endif %}</p>
            <div class="chips"><span class="chip">VISIT</span><span class="chip">LINK</span><span class="chip">{% if meta.lang == 'ko' %}즉시 보상{% elif meta.lang == 'ja' %}即時リワード{% elif meta.lang == 'zh' %}即时奖励{% else %}Instant rewards{% endif %}</span></div>
          </div>
          <div class="card">
            <h3>{% if meta.lang == 'ko' %}안전 설계{% elif meta.lang == 'ja' %}安全設計{% elif meta.lang == 'zh' %}安全机制{% else %}Safety by design{% endif %}</h3>
            <p>{% if meta.lang == 'ko' %}안티 스팸 휴리스틱, 필요 시 수동 검토, 그리고 명확한 제재 기준.{% elif meta.lang == 'ja' %}スパム対策のヒューリスティック、必要に応じた手動審査、明確なルール。{% elif meta.lang == 'zh' %}反垃圾启发式、必要时人工审核、明确违规处理。{% else %}Anti-spam heuristics, manual review where needed, and clear consequences for abuse.{% endif %}</p>
            <div class="chips"><span class="chip">{% if meta.lang == 'ko' %}스팸 방지{% elif meta.lang == 'ja' %}スパム防止{% elif meta.lang == 'zh' %}防垃圾{% else %}Spam guard{% endif %}</span><span class="chip">{% if meta.lang == 'ko' %}이의 제기{% elif meta.lang == 'ja' %}アピール{% elif meta.lang == 'zh' %}申诉{% else %}Appeals{% endif %}</span><span class="chip">{% if meta.lang == 'ko' %}신고{% elif meta.lang == 'ja' %}通報{% elif meta.lang == 'zh' %}举报{% else %}Reporting{% endif %}</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== PROJECTS: LIVE (samples kept) ===== -->
    <section id="projects" class="projects">
        <div class="container">
            <div class="section-head">
            <h2>{% if meta.lang == 'ko' %}진행 중 캠페인{% elif meta.lang == 'ja' %}開催中のキャンペーン{% elif meta.lang == 'zh' %}进行中的活动{% else %}Live Campaigns{% endif %}</h2>
            <a class="more-link" href="https://link-hash.com/rewards/">
                {% if meta.lang == 'ko' %}더 보기{% elif meta.lang == 'ja' %}もっと見る{% elif meta.lang == 'zh' %}查看更多{% else %}View more{% endif %} <span aria-hidden="true">→</span>
            </a>
            </div>
            <p class="sub">
            {% if meta.lang == 'ko' %}가게 구경하듯 과제를 탐색하세요 — 미션 선택, 완료, 보상 수령.{% elif meta.lang == 'ja' %}ショップ感覚でタスクを選んで、こなして、受け取る。{% elif meta.lang == 'zh' %}像逛商店一样选任务、做任务、领奖励。{% else %}Browse tasks like a shop — pick a mission, complete it, claim rewards.{% endif %}
            </p>

            {% if projects and projects|length > 0 %}
            <div class="swiper" id="campaign-swiper">
                <div class="swiper-wrapper">
                {% for c in projects %}
                <div class="swiper-slide">
                    <article class="project-card">
                    <div class="thumb">
                        <img src="{{ c.image_url|default:'' }}" onerror="this.src='{% static 'img/cards/green-office.jpg' %}'" alt="">
                        <div class="task-badges">
                        {% if c.has_visit %}<span class="task-badge visit">VISIT</span>{% endif %}
                        {% if c.has_link %}<span class="task-badge link">LINK</span>{% endif %}
                        </div>
                    </div>
                    <div class="body">
                        <h3>{{ c.title }}</h3>
                        <p>{{ c.summary }}</p>
                        <div class="meta">
                        <div class="pill"><strong>{% if meta.lang == 'ko' %}풀{% elif meta.lang == 'ja' %}プール{% elif meta.lang == 'zh' %}奖励池{% else %}Pool{% endif %}</strong>&nbsp; {{ c.pool_usdt }} USDT</div>
                        <div class="pill"><strong>{% if meta.lang == 'ko' %}참여자{% elif meta.lang == 'ja' %}人数{% elif meta.lang == 'zh' %}参与者{% else %}People{% endif %}</strong>&nbsp; {{ c.participants }}</div>
                        </div>
                        <div class="progress" aria-label="claimed progress"><div class="bar" data-pct="{{ c.claimed_percent|default:0 }}"></div></div>
                        <div style="display:flex; justify-content:space-between; font-size:12px; color:#9fb0aa;">
                        <span>{{ c.claimed_percent|default:0 }}% {% if meta.lang == 'ko' %}클레임{% elif meta.lang == 'ja' %}達成{% elif meta.lang == 'zh' %}已领取{% else %}claimed{% endif %}</span>
                        <span>{{ c.start|date:"Y-m-d" }} → {{ c.end|date:"Y-m-d" }}</span>
                        </div>
                        <div class="foot">
                        <a class="btn" href="/rewards/{{ c.slug }}/">{% if meta.lang == 'ko' %}자세히 보기{% elif meta.lang == 'ja' %}詳細{% elif meta.lang == 'zh' %}查看详情{% else %}View details{% endif %}</a>
                        </div>
                    </div>
                    </article>
                </div>
                {% endfor %}
                </div>
            </div>
            {% else %}
            <div class="empty-wrap" role="status" aria-live="polite">
                <div class="msg">
                {% if meta.lang == 'ko' %}현재 진행 중인 캠페인이 없습니다.{% elif meta.lang == 'ja' %}現在、開催中のキャンペーンはありません。{% elif meta.lang == 'zh' %}目前没有进行中的活动。{% else %}No live campaigns yet.{% endif %}
                </div>
                <div class="hint">
                {% if meta.lang == 'ko' %}새 캠페인이 곧 열립니다. 나중에 다시 확인하거나 알림을 구독하세요.{% elif meta.lang == 'ja' %}まもなく開始予定。後で再度ご確認ください。{% elif meta.lang == 'zh' %}新的活动即将上线，请稍后再来查看。{% else %}New campaigns launch soon — check back shortly.{% endif %}
                </div>
            </div>
            {% endif %}
        </div>
        </section>


    <!-- ===== PAST CAMPAIGNS (samples kept) ===== -->
    <section id="past-projects" class="projects">
        <div class="container">
            <div class="section-head">
            <h2>{% if meta.lang == 'ko' %}지난 캠페인{% elif meta.lang == 'ja' %}過去のキャンペーン{% elif meta.lang == 'zh' %}以往活动{% else %}Past Campaigns{% endif %}</h2>
            <a class="more-link" href="https://link-hash.com/rewards/">
                {% if meta.lang == 'ko' %}전체 보기{% elif meta.lang == 'ja' %}すべて見る{% elif meta.lang == 'zh' %}全部浏览{% else %}Browse all{% endif %} <span aria-hidden="true">→</span>
            </a>
            </div>
            <p class="sub">
            {% if meta.lang == 'ko' %}공개된 지표로 운영 결과를 확인하세요 — 좋은 캠페인의 사례입니다.{% elif meta.lang == 'ja' %}公開メトリクスで成果を確認。良い事例をチェック。{% elif meta.lang == 'zh' %}通过公开指标查看成效——优秀活动的样板。{% else %}Closed pools with public metrics — see what a good campaign looks like.{% endif %}
            </p>

            {% if past_projects and past_projects|length > 0 %}
            <div class="swiper" id="past-swiper">
                <div class="swiper-wrapper">
                {% for c in past_projects %}
                <div class="swiper-slide">
                    <article class="project-card">
                    <div class="thumb">
                        <img src="{{ c.image_url|default:'' }}" onerror="this.src='{% static 'img/cards/neon-city.jpg' %}'" alt="">
                        <div class="task-badges">
                        {% if c.has_link %}<span class="task-badge link">LINK</span>{% endif %}
                        {% if c.has_visit %}<span class="task-badge visit">VISIT</span>{% endif %}
                        </div>
                    </div>
                    <div class="body">
                        <h3>{{ c.title }}</h3>
                        <p>{{ c.summary }}</p>
                        <div class="meta">
                        <div class="pill"><strong>{% if meta.lang == 'ko' %}풀{% elif meta.lang == 'ja' %}プール{% elif meta.lang == 'zh' %}奖励池{% else %}Pool{% endif %}</strong>&nbsp; {{ c.pool_usdt }} USDT</div>
                        <div class="pill"><strong>{% if meta.lang == 'ko' %}참여자{% elif meta.lang == 'ja' %}人数{% elif meta.lang == 'zh' %}参与者{% else %}People{% endif %}</strong>&nbsp; {{ c.participants }}</div>
                        </div>
                        <div class="progress"><div class="bar" data-pct="{{ c.claimed_percent|default:100 }}"></div></div>
                        <div style="display:flex; justify-content:space-between; font-size:12px; color:#9fb0aa;">
                        <span>{{ c.claimed_percent|default:100 }}% {% if meta.lang == 'ko' %}클레임{% elif meta.lang == 'ja' %}達成{% elif meta.lang == 'zh' %}已领取{% else %}claimed{% endif %}</span>
                        <span>{{ c.start|date:"Y-m-d" }} → {{ c.end|date:"Y-m-d" }}</span>
                        </div>
                        <div class="foot"><a class="btn" href="/rewards/{{ c.slug }}/">{% if meta.lang == 'ko' %}요약 보기{% elif meta.lang == 'ja' %}サマリー{% elif meta.lang == 'zh' %}查看总结{% else %}See summary{% endif %}</a></div>
                    </div>
                    </article>
                </div>
                {% endfor %}
                </div>
            </div>
            {% else %}
            <div class="empty-wrap" role="status" aria-live="polite">
                <div class="msg">
                {% if meta.lang == 'ko' %}아직 지난 캠페인 기록이 없습니다.{% elif meta.lang == 'ja' %}過去のキャンペーンはまだありません。{% elif meta.lang == 'zh' %}暂无以往活动记录。{% else %}No past campaigns yet.{% endif %}
                </div>
                <div class="hint">
                {% if meta.lang == 'ko' %}첫 캠페인이 종료되면 여기에서 요약을 볼 수 있어요.{% elif meta.lang == 'ja' %}最初のキャンペーンが終了すると、ここに概要が表示されます。{% elif meta.lang == 'zh' %}首个活动结束后，这里会显示总结。{% else %}Once your first campaign closes, summaries will appear here.{% endif %}
                </div>
            </div>
            {% endif %}
        </div>
        </section>


    <!-- ===== FOOTER ===== -->
    <footer class="footer">
      <div class="container" style="display:flex; align-items:center; justify-content:space-between;">
        <div>© <strong>LinkHash</strong></div>
        <div style="opacity:.7">
          {% if meta.lang == 'ko' %}화이트햇 백링크 · 투명한 리워드{% elif meta.lang == 'ja' %}ホワイトハット被リンク・透明な報酬{% elif meta.lang == 'zh' %}白帽外链 · 透明奖励{% else %}White-hat backlinks · Transparent rewards{% endif %}
        </div>
      </div>
    </footer>

    <!-- ===== LIBS (Swiper only) + stronger animations via IO ===== -->
    <script type="module">
  import Swiper from 'https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.mjs';

    // --- Swiper: mousewheel disabled to avoid page scroll lock ---
    const liveSwiper = new Swiper('#campaign-swiper', {
        spaceBetween: 18,
        grid: { rows: 2, fill: 'row' },
        slidesPerView: 3,
        grabCursor: true,
        simulateTouch: true,   // allow mouse drag on desktop
        breakpoints: { 0:{slidesPerView:1}, 900:{slidesPerView:2}, 1200:{slidesPerView:3} }
        // NOTE: intentionally no 'mousewheel' here (defaults to disabled)
    });

    const pastSwiper = new Swiper('#past-swiper', {
        spaceBetween: 18,
        grid: { rows: 2, fill: 'row' },
        slidesPerView: 3,
        grabCursor: true,
        simulateTouch: true,
        breakpoints: { 0:{slidesPerView:1}, 900:{slidesPerView:2}, 1200:{slidesPerView:3} }
        // NOTE: intentionally no 'mousewheel' here (defaults to disabled)
    });

    // Progress bars on view
    const barsObserver = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
        if(e.isIntersecting){
            const b = e.target;
            const target = (b.dataset.pct ? b.dataset.pct : b.style.width || '0').toString().replace('%','');
            b.style.transition = 'width 900ms cubic-bezier(.2,1,.22,1)';
            requestAnimationFrame(()=> b.style.width = (target ? target : '0') + '%');
            barsObserver.unobserve(b);
        }
        });
    }, { threshold: .3 });
    document.querySelectorAll('.progress .bar').forEach(el => barsObserver.observe(el));

    // Reveal animations
    const revealObserver = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
        if(entry.isIntersecting){
            entry.target.classList.add('in');
            if(entry.target.classList.contains('mini')){
            entry.target.classList.add('pop');
            entry.target.querySelectorAll('.progress .bar').forEach(b=>{
                const w = b.style.width || '60%';
                b.style.width = '0%';
                b.style.transition = 'width 900ms cubic-bezier(.2,1,.22,1) 120ms';
                requestAnimationFrame(()=> b.style.width = w);
            });
            }
            revealObserver.unobserve(entry.target);
        }
        });
    }, { threshold: .25 });
    document.querySelectorAll('.how .reveal, .how .mini').forEach(el=>revealObserver.observe(el));
    </script>
    <script>
    // --- CSRF helper ---
    function getCookie(name){
        const m = document.cookie.match(new RegExp('(^|; )' + encodeURIComponent(name) + '=([^;]*)'));
        return m ? decodeURIComponent(m[2]) : null;
    }
    async function apiGet(url){
        const r = await fetch(url, { credentials: 'same-origin' });
        if(!r.ok) throw new Error((await r.text()) || ('GET ' + url + ' failed'));
        return r.json();
    }
    async function apiPost(url, json){
        const r = await fetch(url, {
        method: 'POST',
        credentials: 'same-origin',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie('csrftoken') || ''
        },
        body: JSON.stringify(json || {})
        });
        if(!r.ok){
        let msg;
        try{ msg = (await r.json()).error }catch(e){ msg = await r.text(); }
        throw new Error(msg || ('POST ' + url + ' failed'));
        }
        return r.json();
    }

    // --- Wallet login ---
    async function connectWallet(){
        try{
        if(!window.ethereum){
            alert('MetaMask not detected. Please install MetaMask.');
            return;
        }
        // 1) Request account
        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        const address = (accounts && accounts[0]) ? accounts[0] : null;
        if(!address){ alert('No account selected.'); return; }

        // 2) Ask backend for a fresh nonce + canonical message
        const nonceRes = await apiGet(`/api/auth/nonce?address=${encodeURIComponent(address)}`);
        if(!nonceRes.ok){ throw new Error(nonceRes.error || 'nonce error'); }
        const message = nonceRes.message || `LinkHash login\n\nNonce: ${nonceRes.nonce}\n\nThis signature proves you control this wallet.`;

        // 3) Sign exact message provided by server
        const signature = await window.ethereum.request({
            method: 'personal_sign',
            params: [ message, address ]
        });

        // 4) Verify on server (sets session)
        const verifyRes = await apiPost('/api/auth/verify', { address, signature, message });
        if(verifyRes && verifyRes.ok){
            window.location.reload();
        }else{
            alert('Login failed.');
        }
        }catch(err){
        console.error(err);
        alert('Wallet login failed: ' + (err && err.message ? err.message : err));
        }
    }

    async function logoutWallet(){
        try{
        await apiPost('/api/auth/logout', {});
        window.location.reload();
        }catch(err){
        console.error(err);
        alert('Logout failed: ' + (err && err.message ? err.message : err));
        }
    }

    // Expose to inline onclick handlers
    window.connectWallet = connectWallet;
    window.logoutWallet  = logoutWallet;
    </script>

    <script>
        (function(){
        const $wrap = document.getElementById('langSwitcher');
        if(!$wrap) return;
        const $btn  = $wrap.querySelector('.lang-btn');
        const $menu = $wrap.querySelector('.lang-menu');
        const current = ($wrap.dataset.current || 'en').toLowerCase();

        // Set current flag on button
        const flagEl = $btn.querySelector('.flag-emoji');
        const flagMap = { en:'🇺🇸', ko:'🇰🇷', ja:'🇯🇵', zh:'🇨🇳' };
        flagEl.textContent = flagMap[current] || '🇺🇸';
        function open(){ $wrap.classList.add('open'); $btn.setAttribute('aria-expanded','true'); }
        function close(){ $wrap.classList.remove('open'); $btn.setAttribute('aria-expanded','false'); }
        $btn.addEventListener('click', (e)=>{ e.stopPropagation(); $wrap.classList.toggle('open'); $btn.setAttribute('aria-expanded', $wrap.classList.contains('open')); });
        document.addEventListener('click', ()=> close());
        document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') close(); });

        function pathFor(lang){
            const loc = window.location;
            const path = loc.pathname;
            const clean = path.replace(/^\/(ko|ja|zh)(\/|$)/, '/'); // strip locale prefix if any

            // Known, localized base pages:
            const baseMap = { '/': true, '/rewards/': true, '/events/': true, '/leaderboard/': true };

            // Rewards Apply special cases (these routes exist explicitly)
            const isApply = /^\/rewards\/apply(\/(ko|ja|zh)\/)?$/.test(path);
            if(isApply){
                if(lang === 'en') return '/rewards/apply/?lang=en'; // ensure session flips to EN
                return `/rewards/apply/${lang}/`;
            }

            if(baseMap[clean]){
                if(lang === 'en'){
                // IMPORTANT: Append ?lang=en so middleware sets session to EN and does NOT redirect back to /ko|ja|zh/
                const q = new URLSearchParams(loc.search);
                q.set('lang','en');
                return clean + (q.toString() ? `?${q.toString()}` : '');
                }
                // ko/ja/zh → prefix with language (single trailing slash on '/')
                return clean === '/' ? `/${lang}/` : `/${lang}${clean}`;
            }

            // Unknown/other page (e.g., /rewards/some-slug-5/) → keep path, toggle ?lang=xx
            const params = new URLSearchParams(loc.search);
            params.set('lang', lang);
            return path + (params.toString() ? `?${params.toString()}` : '');
        }


        $menu.querySelectorAll('.lang-item').forEach(li=>{
        li.addEventListener('click', ()=>{
            const lang = li.getAttribute('data-lang');
            const emoji = li.getAttribute('data-flag') || '';
            // Instant visual feedback
            flagEl.textContent = emoji;
            $wrap.querySelector('.label').textContent =
            lang==='ko' ? '한국어' : lang==='ja' ? '日本語' : lang==='zh' ? '中文' : 'English';

            close();
            const target = pathFor(lang);
            if(target) window.location.href = target;
        });
        });
        })();
        </script>


  </body>
</html>
