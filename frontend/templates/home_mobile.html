<!doctype html>
{% load static %}
<html lang="{{ meta.lang|default:'en' }}">
    <head>
        {% include "partials/ga_head.html" %}
        {% include "partials/gtm_head.html" %}
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
        <title>{{ meta.title|default:"LinkHash | Web3 SEO Rewards" }}</title>
        <link rel="canonical" href="{{ meta.canonical|default:meta.url }}">
        <meta name="robots" content="index,follow">
        <meta name="author" content="LinkHash">
        <meta name="description" content="{{ meta.description|default:'Data-driven backlinks & web3 rewards platform.' }}">
        <!-- OG/Twitter -->
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="LinkHash">
        <meta property="og:title" content="{{ meta.og_title|default:meta.title }}">
        <meta property="og:description" content="{{ meta.og_description|default:meta.description }}">
        <meta property="og:url" content="{{ meta.url }}">
        <meta property="og:image" content="{% static 'img/og-cover.png' %}">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="{{ meta.og_title|default:meta.title }}">
        <meta name="twitter:description" content="{{ meta.og_description|default:meta.description }}">
        <meta name="twitter:image" content="{% static 'img/twitter-card.png' %}">
        <!-- Favicons -->
        <link rel="icon" href="{% static 'img/favicon.ico' %}">
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'img/apple-touch-icon.png' %}">
        <style>
      /* ======= THEME (mobile-first) ======= */
      :root{
        --bg:#0a0b0d; --bg-elev:#0f1115; --panel:#11141a; --panel-2:#0e1318; --grid:#0b0f13; --line:#1a212d;
        --text:#e6f1ee; --muted:#9fb0aa; --green:#16a34a; --green-2:#23d16a;
        --glow:0 0 22px rgba(22,163,74,.35), 0 0 48px rgba(22,163,74,.15);
        --radius:14px; --shadow-lg:0 30px 60px rgba(0,0,0,.55), inset 0 -1px 0 rgba(255,255,255,.03);
        --shadow-md:0 14px 34px rgba(0,0,0,.45);
        --noise:transparent url('data:image/svg+xml;utf8,\
          <svg xmlns="http://www.w3.org/2000/svg" width=\"120\" height=\"120\" viewBox=\"0 0 120 120\">\
          <filter id=\"n\"><feTurbulence type=\"fractalNoise\" baseFrequency=\"0.9\" numOctaves=\"2\" stitchTiles=\"stitch\"/></filter>\
          <rect width=\"120\" height=\"120\" filter=\"url(%23n)\" opacity=\".04\"/></svg>') repeat;
        --container:clamp(320px, 92vw, 840px);
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0; color:var(--text);
        background:
          radial-gradient(40rem 30rem at 90% -10%, rgba(22,163,74,.12), transparent 60%),
          radial-gradient(30rem 20rem at -20% 20%, rgba(35,209,106,.08), transparent 60%),
          linear-gradient(180deg, #08090b, #0a0b0d 20%, #090c10);
        font-family: ui-sans-serif, "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                     "Apple SD Gothic Neo", "Noto Sans KR", "Noto Sans JP", "Noto Sans SC", Arial, sans-serif;
        letter-spacing:.2px;
        background-attachment: fixed;
      }
      a{color:inherit;text-decoration:none}
      .container{width:var(--container); margin:0 auto; padding:0 6px;}

      /* ===== NAV (compact, sticky) ===== */
      .nav{
        position:sticky; top:0; z-index:60; backdrop-filter: blur(12px);
        background:linear-gradient(180deg, rgba(15,17,21,.75), rgba(15,17,21,.45));
        border-bottom:1px solid rgba(255,255,255,.06);
      }
      .nav .row{display:flex; align-items:center; justify-content:space-between; height:64px; gap:10px;}
      .brand{display:flex; align-items:center; gap:8px; font-weight:800; letter-spacing:.3px; color:#d8ffe7; text-shadow:0 0 18px rgba(35,209,106,.24);}
      .brand .dot{width:8px;height:8px;border-radius:999px;background:var(--green);box-shadow:var(--glow)}
      .links{display:flex; align-items:center; gap:10px;}
      .link-min{padding:8px 10px; border-radius:10px; border:1px solid #2a333f; background: rgba(14,18,25,.6); color:#d9f6e6; font-weight:700; font-size:12px}
      .btn{
        display:inline-flex; align-items:center; gap:8px;
        padding:10px 12px; font-weight:800; border-radius:12px;
        background:linear-gradient(180deg,#19b357,#119e49); color:#05160c;
        box-shadow:var(--glow); border:1px solid #2fe07a; font-size:13px;
      }

      /* Make gray CTA same size + allow multi-line wrapping */
      .btn-outline{
        display:inline-flex; align-items:flex-start;        /* helps multi-line alignment */
        gap:8px; padding:10px 12px; border-radius:12px;
        border:1px solid #2a333f; background:rgba(14,18,25,.6); color:#d9f6e6;
        font-weight:800; font-size:13px;                   /* match .btn size */
        white-space:normal;                                /* allow wrapping */
        text-wrap:balance; word-break:keep-all;            /* nicer CJK/EN wrapping */
        line-height:1.35;                                  /* comfortable multi-line */
        max-width:100%;                                    /* donâ€™t overflow container */
      }

      /* Optional: make layout tolerant so the long CTA doesnâ€™t force a new row too early */
      .cta .btn,
      .cta .btn-outline{ flex:0 1 auto; }

      .pill-addr{max-width:140px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}

      /* Language dropdown */
      .lang{ position:relative;}
      .lang-btn{
        display:inline-flex; align-items:center; gap:8px; padding:8px 10px; font-weight:800; border-radius:10px;
        border:1px solid #2a333f; background: rgba(14,18,25,.6); color:#d9f6e6; cursor:pointer; font-size:12px
      }
      .lang-btn:hover{ border-color:rgba(35,209,106,.35); box-shadow:0 0 16px rgba(35,209,106,.18) }
      .lang-menu{
        position:absolute; top:110%; right:0; width:210px; background:linear-gradient(180deg, #0f1419, #0c1116);
        border:1px solid rgba(255,255,255,.08); border-radius:12px; box-shadow:0 20px 40px rgba(0,0,0,.45);
        padding:6px; display:none; z-index:70;
      }
      .lang.open .lang-menu{ display:block; animation:menuIn .14s ease-out }
      @keyframes menuIn{ from{ transform:translateY(-6px); opacity:0 } to{ transform:translateY(0); opacity:1 } }
      .lang-item{display:flex; align-items:center; gap:10px; padding:10px 10px; border-radius:10px; cursor:pointer; color:#cfe7dd; font-weight:700;}
      .lang-item:hover{ background:#0b1218; border:1px solid #1d2836 }
      .flag-emoji{
        display:inline-flex; align-items:center; justify-content:center;
        width:18px; height:18px; line-height:18px; font-size:14px; border-radius:3px;
        background:rgba(255,255,255,.06); box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
      }

      /* ===== HERO (tight) ===== */
      .hero{position:relative; overflow:hidden; border-bottom:1px solid rgba(255,255,255,.06);}
      .hero::before{
        content:""; position:absolute; inset:-10%; background:
          radial-gradient(36rem 26rem at 20% -10%, rgba(22,163,74,.18), transparent 60%),
          radial-gradient(30rem 20rem at 120% 10%, rgba(22,163,74,.10), transparent 60%);
        filter: blur(36px); z-index:0; opacity:.6;
      }
      .hero .container{min-height:64svh; display:flex; align-items:center; position:relative; z-index:1; padding:28px 10px;}
      .badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:rgba(22,163,74,.14); border:1px solid rgba(35,209,106,.35); color:#aef2c9; font-weight:800; margin-bottom:12px; font-size:12px}
      .hero h1{
        font-size:clamp(22px, 6.2vw, 30px);
        line-height:1.6;             /* was ~1.18/1.22 â†’ more airy */
        margin:0 0 14px;              /* add a bit more spacing below the heading */
        letter-spacing:.2px;
        word-break:keep-all;
        overflow-wrap:anywhere;
        text-wrap:balance;
      }
      .highlight{color:#aaf5c7; text-shadow:var(--glow);}
      .nowrap{white-space:nowrap;}
      .hero p{
        color:var(--muted);
        font-size:14px;
        line-height:1.6;              /* increase paragraph line spacing */
        margin:0 0 22px;              /* a bit more gap before the buttons */
      }
      .cta{display:flex; gap:10px; flex-wrap:wrap;}

      /* ===== SECTION WRAPPER ===== */
      .section{padding:28px 0; background:linear-gradient(180deg, rgba(12,16,20,.65), rgba(10,12,16,.65)), var(--noise);}
      .section h2{font-size:22px; margin:0 0 10px;}
      .section p.lead{color:#9fb0aa; margin:0 0 16px; font-size:14px;}

      /* ===== â€œHow it worksâ€ steps (stacked) ===== */
      /* More breathing room between each card in #how */
      #how .step{
        display:grid; grid-template-columns:1fr;
        gap:16px;                            /* was 12px */
        align-items:start;
        margin:26px 0 36px;                  /* was 16px 0 24px */
      }

      /* (Optional) a little extra padding above/below the whole #how section */
      #how.section{ padding:36px 0; }        /* was 28px 0 via .section default */

      .step h3{font-size:18px; margin:0 0 6px;}
      .step p{margin:0; color:#b4c5bf; font-size:14px}
      .mini{
        border:1px solid rgba(255,255,255,.08); border-radius:14px;
        background:linear-gradient(180deg, #0f1419, #0c1116); box-shadow:var(--shadow-md);
        overflow:hidden; opacity:0; transform:translateY(28px) scale(.98);
        transition:opacity .65s ease, transform .65s cubic-bezier(.2,1,.22,1);
      }
      .mini.in{opacity:1; transform:none;}
      .mini.pop{animation:popIn .7s cubic-bezier(.2,1,.22,1) both;}
      @keyframes popIn{
        0%{opacity:0; transform:translateY(32px) scale(.95)}
        60%{opacity:1; transform:translateY(-3px) scale(1.01)}
        100%{opacity:1; transform:translateY(0) scale(1)}
      }
      .mini .chrome{display:flex; align-items:center; gap:6px; height:32px; padding:0 10px; border-bottom:1px solid rgba(255,255,255,.06); background:rgba(14,18,25,.65);}
      .dot{width:8px; height:8px; border-radius:999px; background:#334050;}
      .dot.red{background:#ff6b6b} .dot.yellow{background:#ffd166} .dot.green{background:#06d6a0}
      .mini .body{padding:12px;}

      .mini .form-row{display:grid; grid-template-columns:1fr; gap:8px; margin-bottom:8px;}
      .mini label{display:block; font-weight:800; font-size:11px; margin:0 0 6px; color:#d0e6dc}
      .mini input{width:100%; padding:10px 12px; border:1px solid #2a333f; border-radius:10px; background:#0b1117; color:#e6f1ee; font-size:13px;}
      .fake-chip{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid #1d2836; background:#0b1218; color:#cde6da; font-size:11px; margin-right:6px;}

      .tag{padding:4px 8px; border-radius:999px; border:1px solid #22303e; background:#0a1117; color:#c7e8d9; font-size:11px; font-weight:700;}

      /* ===== CARDS ===== */
      .card{background:linear-gradient(180deg, #0f1419, #0c1116); border:1px solid rgba(255,255,255,.06); border-radius:16px; box-shadow:var(--shadow-lg); padding:14px;}
      .chips{display:flex; gap:6px; flex-wrap:wrap; margin-top:8px;}
      .chip{padding:6px 10px; border-radius:999px; border:1px solid #22303e; background:#0a1117; color:#c7e8d9; font-size:12px; display:inline-flex; align-items:center; gap:6px;}

      /* ===== HScroll Carousel (no external lib) ===== */
      .rail{
        display:flex; gap:12px; overflow-x:auto; -webkit-overflow-scrolling:touch; scroll-snap-type:x mandatory; padding:6px 2px 4px;
      }
      .rail::-webkit-scrollbar{height:8px} .rail::-webkit-scrollbar-thumb{background:#22303e; border-radius:8px}
      .slide{flex:0 0 82%; max-width:82%; scroll-snap-align:start}
      @media (min-width:420px){ .slide{flex-basis:68%; max-width:68%} }
      @media (min-width:520px){ .slide{flex-basis:56%; max-width:56%} }

      .project-card{display:flex; flex-direction:column; height:100%; overflow:hidden; background:linear-gradient(180deg, #0d1217, #0b0f14); border:1px solid rgba(255,255,255,.06); border-radius:16px; box-shadow:var(--shadow-md);}
      .project-card .thumb{position:relative; height:170px; background:#0b1117; overflow:hidden;}
      .project-card .thumb img{width:100%; height:100%; object-fit:cover; display:block; opacity:.92; transform:scale(1.02)}
      .task-badges{position:absolute; left:10px; bottom:10px; display:flex; gap:6px;}
      .task-badge{padding:6px 10px; border-radius:999px; font-size:11px; font-weight:800; background:rgba(14,18,25,.8); border:1px solid rgba(255,255,255,.08);}
      .task-badge.visit{color:#a0f2bd; border-color:#2a6f47}
      .task-badge.link{color:#b2f5ff; border-color:#2a455e}
      .project-card .body{flex:1; padding:12px; display:flex; flex-direction:column; gap:8px;}
      .project-card h3{font-size:16px; margin:0}
      .project-card p{color:#b7c8c1; font-size:13px; margin:0 0 4px}
      .meta{display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:4px;}
      .meta .pill{background:#0b1218; border:1px solid #1d2836; border-radius:10px; padding:7px 8px; font-size:12px; color:#cde6da; display:flex; align-items:center; gap:6px;}
      .progress{height:8px; background:#0b1218; border:1px solid #1d2836; border-radius:999px; overflow:hidden; margin-top:6px;}
      .progress .bar{height:100%; width:0; background:linear-gradient(90deg,#19b357,#23d16a); box-shadow:var(--glow)}
      .foot{display:flex; justify-content:flex-end; margin-top:auto;}
      .foot .btn{padding:9px 10px; font-size:12px}

      .section-head{display:flex; align-items:center; justify-content:space-between; gap:10px; margin:4px 0 8px;}
      .more-link{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px; font-weight:800; border:1px solid rgba(255,255,255,.08); background:rgba(14,18,25,.6); color:#d9f6e6; font-size:12px}
      .more-link:hover{border-color:rgba(35,209,106,.35); box-shadow:0 0 16px rgba(35,209,106,.18)}

      /* Empty states */
      .empty-wrap{padding:14px; border:1px solid rgba(255,255,255,.08); border-radius:14px; background:linear-gradient(180deg,#0f1419,#0c1116); color:#b4c5bf; display:grid; gap:6px;}
      .empty-wrap .msg{font-size:14px}
      .empty-wrap .hint{opacity:.75; font-size:12px}

      /* Reveal animations */
      .reveal{opacity:0; transform:translateY(24px); transition:opacity .55s ease, transform .55s cubic-bezier(.22,.87,.31,1);}
      .reveal.in{opacity:1; transform:none;}
        /* ===== MOBILE HEADER (namespaced .mnav) ===== */
.mnav{position:sticky; top:0; z-index:80; padding-top:env(safe-area-inset-top);
  background:linear-gradient(180deg, rgba(15,17,21,.82), rgba(15,17,21,.52));
  backdrop-filter: blur(12px); border-bottom:1px solid rgba(255,255,255,.06);}
.mnav-bar{display:flex; align-items:center; justify-content:space-between; height:56px; gap:8px;}

.mnav-brand{display:inline-flex; align-items:center; gap:8px; font-weight:800; color:#d8ffe7; text-shadow:0 0 14px rgba(35,209,106,.22);}
.mnav-brand .dot{width:8px;height:8px;border-radius:999px;background:#16a34a;box-shadow:0 0 16px rgba(22,163,74,.42)}
.mnav-brand .name{font-size:16px; letter-spacing:.2px}

.mnav-actions{display:flex; align-items:center; gap:8px;}
/* How-to pills (header actions) */
      .mnav .howto{display:flex; align-items:center; gap:8px;}
      .mnav .howto-label{font-weight:800; color:#cfe7dd; opacity:.95; font-size:14px; white-space:nowrap;}

      /* Icon-only pills sized like the hamburger (36x36 with 22px glyph) */
      .mnav .pill{
        display:inline-flex; align-items:center; justify-content:center;
        width:36px; height:36px; border-radius:10px;
        border:1px solid #2a333f; background:#0b1117; color:#e6f1ee;
        transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
      }
      .mnav .pill:hover{ border-color:rgba(35,209,106,.35); box-shadow:0 0 16px rgba(35,209,106,.18) }
      .mnav .pill:active{ transform:translateY(1px) }
      .mnav .icon{ width:22px; height:22px; display:inline-block; }
      .mnav .icon svg{ width:22px; height:22px; display:block; }

      @media (max-width:360px){
        .mnav .howto-label{ display:none; } /* keep it tidy on very small screens */
      }
.mnav .btn{display:inline-flex; align-items:center; gap:6px; padding:8px 10px; font-weight:800; border-radius:10px; border:1px solid #2fe07a;
  background:linear-gradient(180deg,#19b357,#119e49); color:#05160c; box-shadow:0 0 22px rgba(22,163,74,.25);}
.mnav .pill-addr{max-width:130px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; border:1px solid #2a333f; background:#0b1117;
  color:#d9f6e6; border-radius:999px; padding:6px 10px; font-size:12px; font-weight:700;}

.mnav-toggle{display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; border-radius:10px;
  border:1px solid #2a333f; background:#0b1117; color:#e6f1ee;}
.mnav-toggle:active{transform:scale(.98)}

/* Sheet */
.mnav-sheet{position:relative; background:linear-gradient(180deg,#0f1419,#0c1116);
  border-top:1px solid rgba(255,255,255,.06); box-shadow:0 30px 60px rgba(0,0,0,.5);
  padding:12px 12px calc(12px + env(safe-area-inset-bottom));}
.mnav-sheet[hidden]{display:none;}
.mnav-list{display:grid; gap:8px; margin:4px 0 10px;}
.mnav-list .item{display:flex; align-items:center; gap:8px; padding:12px 12px; border-radius:12px; font-weight:800;
  border:1px solid #263040; background:rgba(14,18,25,.65); color:#cfe7dd;}
.mnav-list .item:hover{border-color:rgba(35,209,106,.35); box-shadow:0 0 16px rgba(35,209,106,.18)}
.mnav-list .item.active{color:#05160c; border-color:#2fe07a; background:linear-gradient(180deg,#19b357,#119e49); box-shadow:0 0 22px rgba(22,163,74,.25)}
.mnav-list .item.outline{background:#0b1117}

/* Language */
.mnav-lang{margin:2px 0 10px; position:relative;}
.mnav .lang-btn{display:inline-flex; align-items:center; gap:8px; padding:10px 12px; font-weight:800; border-radius:12px; border:1px solid #2a333f; background:#0b1117; color:#cfe7dd}
.mnav .flag-emoji{display:inline-flex; align-items:center; justify-content:center; width:18px; height:18px; line-height:18px; font-size:14px; border-radius:3px;
  background:rgba(255,255,255,.06); box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);}
.mnav .lang-menu{position:absolute; top:110%; left:0; min-width:200px; padding:6px; margin:0; list-style:none; display:none; z-index:90;
  background:linear-gradient(180deg,#0f1419,#0c1116); border:1px solid rgba(255,255,255,.08); border-radius:12px; box-shadow:0 20px 40px rgba(0,0,0,.45)}
.mnav .lang.open .lang-menu,
.mnav .mnav-lang.open .lang-menu{display:block; animation:mnavMenuIn .14s ease-out}

@keyframes mnavMenuIn{from{transform:translateY(-6px);opacity:0} to{transform:translateY(0);opacity:1}}
.mnav .lang-item{display:flex; align-items:center; gap:10px; padding:10px; border-radius:10px; cursor:pointer; color:#cfe7dd; font-weight:700;}
.mnav .lang-item:hover{ background:#0b1218; border:1px solid #1d2836 }

/* Logout button inside sheet */
.mnav .danger{width:100%; margin-top:6px; padding:11px 12px; border-radius:12px; border:1px solid #3b2020;
  background:linear-gradient(180deg,#6e2c2c,#5a2222); color:#ffeaea; font-weight:800}

/* Ultra-narrow friendliness (Galaxy Fold cover width ~320px) */
@media (max-width:360px){
  .mnav .pill-addr{max-width:98px}
  .mnav-bar{height:52px}
  .mnav-brand .name{font-size:15px}
}

/* Large-fold (unfolded) still uses mobile header but breathes a bit */
@media (min-width:720px){
  .mnav-bar{height:60px}
}
      /* FOOTER */
      .footer{padding:18px 0 24px; border-top:1px solid rgba(255,255,255,.06); color:#a7b9b1; background:#0a0c10; font-size:12px}
        </style>
    </head>
    <body>
        {% include "partials/gtm_body.html" %}
        <!-- ===== NAV ===== -->
        <!-- ===== MOBILE HEADER (copy/paste) ===== -->
        <header class="mnav" role="banner">
            <div class="container mnav-bar">
                <a href="{% if meta.lang == 'ko' %}/ko/{% elif meta.lang == 'ja' %}/ja/{% elif meta.lang == 'zh' %}/zh/{% else %}/{% endif %}" class="mnav-brand" aria-label="LinkHash Home">
                    <span class="dot" aria-hidden="true"></span>
                    <span class="name">LinkHash</span>
                </a>
                <div class="mnav-actions">
                    {% with ig=meta.instagram_guide_url|default:'https://www.instagram.com/' tw=meta.twitter_guide_url|default:'https://x.com/' %}
                    <div class="howto">
                        <span class="howto-label">
                            {% if meta.lang == 'ko' %}ì´ìš© ë°©ë²•:{% elif meta.lang == 'ja' %}ä½¿ã„æ–¹:{% elif meta.lang == 'zh' %}ä½¿ç”¨æ–¹æ³•ï¼š{% else %}How to use:{% endif %}
                        </span>
                        <!-- Instagram guide (icon only) -->
                        <a
                            class="pill"
                            href="{{ ig }}"
                            target="_blank"
                            rel="noopener"
                            aria-label="{% if meta.lang == 'ko' %}ì¸ìŠ¤íƒ€ê·¸ë¨ ê°€ì´ë“œ{% elif meta.lang == 'ja' %}Instagramã‚¬ã‚¤ãƒ‰{% elif meta.lang == 'zh' %}Instagram æŒ‡å—{% else %}Instagram Guide{% endif %}"
                            title="{% if meta.lang == 'ko' %}ì¸ìŠ¤íƒ€ê·¸ë¨ ê°€ì´ë“œ{% elif meta.lang == 'ja' %}Instagramã‚¬ã‚¤ãƒ‰{% elif meta.lang == 'zh' %}Instagram æŒ‡å—{% else %}Instagram Guide{% endif %}"
                        >
                            <span class="icon" aria-hidden="true">
                                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                    <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5a5.5 5.5 0 1 1 0 11 5.5 5.5 0 0 1 0-11zm0 2a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zM18.5 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                                </svg>
                            </span>
                        </a>
                        <!-- X (Twitter) guide (icon only) -->
                        <a
                            class="pill"
                            href="{{ tw }}"
                            target="_blank"
                            rel="noopener"
                            aria-label="{% if meta.lang == 'ko' %}X ê°€ì´ë“œ{% elif meta.lang == 'ja' %}Xã‚¬ã‚¤ãƒ‰{% elif meta.lang == 'zh' %}X æŒ‡å—{% else %}X Guide{% endif %}"
                            title="{% if meta.lang == 'ko' %}X ê°€ì´ë“œ{% elif meta.lang == 'ja' %}Xã‚¬ã‚¤ãƒ‰{% elif meta.lang == 'zh' %}X æŒ‡å—{% else %}X Guide{% endif %}"
                        >
                            <span class="icon" aria-hidden="true">
                                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                    <path d="M3 3h3.3l5.3 7.2L15.9 3H21l-8.1 10.6L21 21h-3.3l-6-8.1L8.1 21H3l8-10.4L3 3z"/>
                                </svg>
                            </span>
                        </a>
                    </div>
                    {% endwith %}
                    <button
                        class="mnav-toggle"
                        id="mnavToggle"
                        type="button"
                        aria-controls="mnavSheet"
                        aria-expanded="false"
                        aria-label="Menu"
                    >
                        <svg
                            viewBox="0 0 24 24"
                            width="22"
                            height="22"
                            aria-hidden="true"
                        >
                            <path
                                d="M4 6h16M4 12h16M4 18h16"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                            />
                        </svg>
                    </button>
                </div>
            </div>
            <!-- Slide-down sheet -->
            <div class="mnav-sheet" id="mnavSheet" hidden>
                <nav class="mnav-list" aria-label="Primary">
                    <a class="item active" href="{% if meta.lang == 'ko' %}/ko/{% elif meta.lang == 'ja' %}/ja/{% elif meta.lang == 'zh' %}/zh/{% else %}/{% endif %}">
                        ğŸ  {% if meta.lang == 'ko' %}í™ˆ{% elif meta.lang == 'ja' %}ãƒ›ãƒ¼ãƒ {% elif meta.lang == 'zh' %}ä¸»é¡µ{% else %}Home{% endif %}
                    </a>
                    <a class="item" href="{% if meta.lang == 'ko' %}/ko/rewards/{% elif meta.lang == 'ja' %}/ja/rewards/{% elif meta.lang == 'zh' %}/zh/rewards/{% else %}/rewards/{% endif %}">
                        ğŸ {% if meta.lang == 'ko' %}ë¦¬ì›Œë“œ{% elif meta.lang == 'ja' %}ãƒªãƒ¯ãƒ¼ãƒ‰{% elif meta.lang == 'zh' %}å¥–åŠ±{% else %}Rewards{% endif %}
                    </a>
                    <a class="item" href="{% if meta.lang == 'ko' %}/ko/events/{% elif meta.lang == 'ja' %}ï¼ja/events/{% elif meta.lang == 'zh' %}/zh/events/{% else %}/events/{% endif %}">
                        ğŸ“£ {% if meta.lang == 'ko' %}ì´ë²¤íŠ¸{% elif meta.lang == 'ja' %}ã‚¤ãƒ™ãƒ³ãƒˆ{% elif meta.lang == 'zh' %}æ´»åŠ¨{% else %}Events{% endif %}
                    </a>
                    <a class="item" href="{% if meta.lang == 'ko' %}/ko/leaderboard/{% elif meta.lang == 'ja' %}/ja/leaderboard/{% elif meta.lang == 'zh' %}/zh/leaderboard/{% else %}/leaderboard/{% endif %}">
                        ğŸ† {% if meta.lang == 'ko' %}ë¦¬ë”ë³´ë“œ{% elif meta.lang == 'ja' %}ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰{% elif meta.lang == 'zh' %}æ’è¡Œæ¦œ{% else %}Leaderboard{% endif %}
                    </a>
                    <a class="item outline" href="{% if meta.lang == 'ko' %}/rewards/apply/ko/{% elif meta.lang == 'ja' %}/rewards/apply/ja/{% elif meta.lang == 'zh' %}/rewards/apply/zh/{% else %}/rewards/apply/{% endif %}">
                        ğŸ“ {% if meta.lang == 'ko' %}ìº í˜ì¸ ì‹ ì²­{% elif meta.lang == 'ja' %}ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ç”³è«‹{% elif meta.lang == 'zh' %}ç”³è¯·å‘èµ·æ´»åŠ¨{% else %}Apply for campaign{% endif %}
                    </a>
                </nav>
                <!-- Language switcher -->
                <div class="mnav-lang" id="langSwitcher" data-current="{{ meta.lang|default:'en' }}">
                    <button
                        class="lang-btn"
                        type="button"
                        aria-haspopup="listbox"
                        aria-expanded="false"
                    >
                        <span class="flag-emoji" aria-hidden="true"></span>
                        <span class="label">
                            {% if meta.lang == 'ko' %}í•œêµ­ì–´{% elif meta.lang == 'ja' %}æ—¥æœ¬èª{% elif meta.lang == 'zh' %}ä¸­æ–‡{% else %}English{% endif %}
                        </span>
                        <svg
                            class="chev"
                            viewBox="0 0 20 20"
                            width="14"
                            height="14"
                            aria-hidden="true"
                        >
                            <path
                                d="M5 7l5 6 5-6"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                            />
                        </svg>
                    </button>
                    <ul
                        class="lang-menu"
                        role="listbox"
                        tabindex="-1"
                        aria-label="Select language"
                    >
                        <li
                            class="lang-item"
                            role="option"
                            data-lang="en"
                            data-flag="ğŸ‡ºğŸ‡¸"
                        >ğŸ‡ºğŸ‡¸ English</li>
                        <li
                            class="lang-item"
                            role="option"
                            data-lang="ko"
                            data-flag="ğŸ‡°ğŸ‡·"
                        >ğŸ‡°ğŸ‡· í•œêµ­ì–´</li>
                        <li
                            class="lang-item"
                            role="option"
                            data-lang="ja"
                            data-flag="ğŸ‡¯ğŸ‡µ"
                        >ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</li>
                        <li
                            class="lang-item"
                            role="option"
                            data-lang="zh"
                            data-flag="ğŸ‡¨ğŸ‡³"
                        >ğŸ‡¨ğŸ‡³ ä¸­æ–‡</li>
                    </ul>
                </div>
                {% if wallet_user %}
                <button class="danger" type="button" onclick="(window.logoutWallet||(()=>alert('Wallet script missing')))()">
                    {% if meta.lang == 'ko' %}ë¡œê·¸ì•„ì›ƒ{% elif meta.lang == 'ja' %}ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ{% elif meta.lang == 'zh' %}é€€å‡º{% else %}Logout{% endif %}
                </button>
                {% endif %}
            </div>
        </header>
        <!-- ===== HERO (UPDATED COPY) ===== -->
        <section class="hero">
            <div class="container">
                <div class="content">
                    <div class="badge">Web3 Â· SEO Â· Rewards</div>
                    <h1>
                        {% if meta.lang == 'ko' %}
              ì•±ì´ë‚˜ ì›¹ì‚¬ì´íŠ¸ë¥¼ í™ë³´í•˜ê³  ì„¤ë¬¸ì— ì‘ë‹µí•˜ë©´ â€”
                        <span class="highlight">
                            íˆ¬ëª…í•œ
                            <span class="nowrap">íƒˆì¤‘ì•™</span> ë§ˆì¼€íŒ…ìœ¼ë¡œ ì•”í˜¸í™”í ë³´ìƒ</span>
                        ì„ ë°›ìŠµë‹ˆë‹¤.
            {% elif meta.lang == 'ja' %}
              ã‚¢ãƒ—ãƒªã‚„ã‚µã‚¤ãƒˆã‚’å®£ä¼ã—ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã«å›ç­”ã™ã‚‹ã¨â€”
                        <span style="color:#aaf5c7; text-shadow:var(--glow)">é€æ˜ã§åˆ†æ•£å‹ã®ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã§æš—å·è³‡ç”£å ±é…¬</span>
                        ã‚’å—ã‘å–ã‚Œã¾ã™ã€‚
            {% elif meta.lang == 'zh' %}
              æ¨å¹¿åº”ç”¨æˆ–ç½‘ç«™å¹¶å‚ä¸é—®å· â€”
                        <span style="color:#aaf5c7; text-shadow:var(--glow)">é€šè¿‡é€æ˜çš„å»ä¸­å¿ƒåŒ–è¥é”€è·å¾—åŠ å¯†è´§å¸å¥–åŠ±</span>
                        ã€‚
            {% else %}
              Promote apps or websites and answer surveys â€”
                        <span style="color:#aaf5c7; text-shadow:var(--glow)">earn crypto through transparent, decentralized marketing</span>
                        .
            {% endif %}
                    </h1>
                    <p>
                        {% if meta.lang == 'ko' %}
              X, í˜ì´ìŠ¤ë¶, ë¸”ë¡œê·¸ì— ë§í¬ì™€ í›„ê¸°ë¥¼ ì˜¬ë¦¬ê±°ë‚˜ ì•±ì„ ì„¤ì¹˜í•´ ë¦¬ë·°ë¥¼ ë‚¨ê¸°ê³  ì„¤ë¬¸ì— ì‘ë‹µí•˜ì„¸ìš”. ìŠ¹ì¸ ê¸°ì¤€ê³¼ ë³´ìƒ ì§„í–‰ì€ ëª¨ë‘ ê³µê°œë©ë‹ˆë‹¤.
            {% elif meta.lang == 'ja' %}
              Xã‚„Facebookã€ãƒ–ãƒ­ã‚°ã§ãƒªãƒ³ã‚¯ã¨çŸ­ã„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã€‚ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã«å›ç­”ã€‚æ‰¿èªåŸºæº–ã¨é€²æ—ã¯å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚
            {% elif meta.lang == 'zh' %}
              åœ¨ Xã€Facebookã€åšå®¢åˆ†äº«é“¾æ¥å¹¶å†™ç®€è¯„ã€‚å®‰è£…åº”ç”¨ååœ¨å•†åº—ç•™ä¸‹è¯„è®ºå¹¶å›ç­”é—®å·ã€‚å®¡æ ¸æ ‡å‡†ä¸å‘æ”¾è¿›åº¦å‡å…¬å¼€é€æ˜ã€‚
            {% else %}
              Share links with a short review on X, Facebook, or blogs. Install apps and leave store reviews. Answer surveys. Approval rules and payout progress are public.
            {% endif %}
                    </p>
                    <div class="cta">
                        <!-- Go to the localized Rewards list -->
                        <a class="btn" href="{% if meta.lang == 'ko' %}/ko/rewards/{% elif meta.lang == 'ja' %}/ja/rewards/{% elif meta.lang == 'zh' %}/zh/rewards/{% else %}/rewards/{% endif %}">
                            {% if meta.lang == 'ko' %}ìº í˜ì¸ ë³´ê¸°{% elif meta.lang == 'ja' %}ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã‚’è¦‹ã‚‹{% elif meta.lang == 'zh' %}æŸ¥çœ‹æ´»åŠ¨{% else %}Explore Campaigns{% endif %}
                        </a>
                        <!-- Go to the localized Advertiser guide -->
                        <a class="btn-outline" href="{% if meta.lang == 'ko' %}/ko/advertiser/{% elif meta.lang == 'ja' %}/ja/advertiser/{% elif meta.lang == 'zh' %}/zh/advertiser/{% else %}/advertiser/{% endif %}">
                            {% if meta.lang == 'ko' %}ë´‡ ì—†ì´ ìì—°ìŠ¤ëŸ½ê²Œ í™ë³´í•˜ëŠ” ë°©ë²• ë³´ê¸°{% elif meta.lang == 'ja' %}ãƒœãƒƒãƒˆã«é ¼ã‚‰ãªã„æœ‰æ©Ÿçš„ãªãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³æ–¹æ³•ã‚’è¦‹ã‚‹{% elif meta.lang == 'zh' %}äº†è§£ä¸é æœºå™¨äººå®ç°è‡ªç„¶æ¨å¹¿çš„æ–¹æ³•{% else %}See how you can get organic promotion without bots{% endif %}
                        </a>
                    </div>
                </div>
            </div>
        </section>
        <!-- ===== HOW IT WORKS (UPDATED CONTENT) ===== -->
        <section id="how" class="section">
            <div class="container">
                <!-- Step 1: Promote advertiser website (X-like card) -->
                <div class="step">
                    <div class="reveal">
                        <h3>1) {% if meta.lang == 'ko' %}ê´‘ê³ ì£¼ ì›¹ì‚¬ì´íŠ¸ í™ë³´{% elif meta.lang == 'ja' %}åºƒå‘Šä¸»ã®ã‚µã‚¤ãƒˆã‚’å®£ä¼{% elif meta.lang == 'zh' %}æ¨å¹¿å¹¿å‘Šä¸»ç½‘ç«™{% else %}Promote an advertiserâ€™s website{% endif %}</h3>
                        <p>
                            {% if meta.lang == 'ko' %}
                X, í˜ì´ìŠ¤ë¶, ë¸”ë¡œê·¸ì— ë§í¬ì™€ í›„ê¸°ë¥¼ ì˜¬ë¦¬ë©´ ìŠ¹ì¸ í›„ ì•”í˜¸í™”íê°€ ì§€ê¸‰ë©ë‹ˆë‹¤.
              {% elif meta.lang == 'ja' %}
                Xã‚„Facebookã€ãƒ–ãƒ­ã‚°ã«ãƒªãƒ³ã‚¯ã¨çŸ­ã„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã€‚æ‰¿èªå¾Œã«æš—å·è³‡ç”£ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚
              {% elif meta.lang == 'zh' %}
                åœ¨ Xã€Facebookã€åšå®¢åˆ†äº«é“¾æ¥å¹¶å†™ç®€è¯„ã€‚å®¡æ ¸é€šè¿‡åå‘æ”¾åŠ å¯†è´§å¸ã€‚
              {% else %}
                Post the advertiserâ€™s link on X, Facebook, or your blog with a short review. After approval, you earn crypto.
              {% endif %}
                        </p>
                    </div>
                    <div class="mini" aria-label="X-like post preview">
                        <div class="chrome">
                            <span class="dot red"></span>
                            <span class="dot yellow"></span>
                            <span class="dot green"></span>
                        </div>
                        <div class="body">
                            <div style="display:flex; gap:10px;">
                                <div style="width:36px;height:36px;border-radius:999px;background:#1f2937;"></div>
                                <div style="flex:1;">
                                    <div style="display:flex; align-items:center; gap:6px; font-size:13px;">
                                        <strong>Alex</strong>
                                        <span style="opacity:.8">@alex</span>
                                        <span style="opacity:.6">Â· 2h</span>
                                    </div>
                                    <div style="margin:8px 0 10px; color:#d6e6df; font-size:13px;">
                                        Exploring
                                        <strong>LinkHash</strong>
                                        â€” transparent, decentralized marketing where contributors earn crypto for real actions. LHX hit a new ATH. ğŸš€
                                        <a href="https://link-hash.com" style="text-decoration:underline;">link-hash.com</a>
                                    </div>
                                    <div style="border:1px solid #22303e; border-radius:12px; overflow:hidden;">
                                        <div style="height:130px; background:#0b1117;">
                                            <img src="{% static 'img/landing/twitter.png' %}" alt="Link preview" style="width:100%; height:100%; object-fit:cover; display:block;">
                                        </div>
                                        <div style="padding:8px 10px;">
                                            <div style="font-weight:700; font-size:13px;">LinkHash â€” Earn Crypto for Real Engagement</div>
                                            <div style="font-size:11px; color:#9fb0aa; margin-top:2px;">New campaign live â€¢ ATH milestone reached</div>
                                        </div>
                                    </div>
                                    <div style="display:flex; gap:22px; font-size:11px; opacity:.8; margin-top:8px;">
                                        <span>â†© 12</span>
                                        <span>ğŸ” 34</span>
                                        <span>â¤ 210</span>
                                        <span>ğŸ“Š 5k</span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:8px;">
                                <span class="fake-chip">X</span>
                                <span class="fake-chip">Facebook</span>
                                <span class="fake-chip">Blog</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Step 2: Install advertiser app (Play Store-like) -->
                <div class="step">
                    <div class="reveal">
                        <h3>2) {% if meta.lang == 'ko' %}ê´‘ê³ ì£¼ ì•± ì„¤ì¹˜ì™€ ë¦¬ë·°{% elif meta.lang == 'ja' %}åºƒå‘Šä¸»ã®ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼{% elif meta.lang == 'zh' %}å®‰è£…å¹¿å‘Šä¸»åº”ç”¨å¹¶æ’°å†™è¯„è®º{% else %}Install an advertiserâ€™s app and leave a review{% endif %}</h3>
                        <p>
                            {% if meta.lang == 'ko' %}
                ì•±ì„ ì„¤ì¹˜í•˜ê³  ìŠ¤í† ì–´ì— ë¦¬ë·°ë¥¼ ë‚¨ê¸°ë©´ ìŠ¹ì¸ í›„ ì•”í˜¸í™”íê°€ ì§€ê¸‰ë©ë‹ˆë‹¤.
              {% elif meta.lang == 'ja' %}
                ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚¹ãƒˆã‚¢ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã€‚æ‰¿èªå¾Œã«æš—å·è³‡ç”£ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚
              {% elif meta.lang == 'zh' %}
                å®‰è£…åº”ç”¨å¹¶åœ¨å•†åº—ç•™ä¸‹è¯„è®ºã€‚å®¡æ ¸é€šè¿‡åå‘æ”¾åŠ å¯†è´§å¸ã€‚
              {% else %}
                Install the advertiserâ€™s app and write a store review. After approval, you earn crypto.
              {% endif %}
                        </p>
                    </div>
                    <div class="mini" aria-label="Play Store-like preview">
                        <div class="chrome">
                            <span class="dot red"></span>
                            <span class="dot yellow"></span>
                            <span class="dot green"></span>
                        </div>
                        <div class="body">
                            <div style="display:flex; gap:10px; align-items:center; justify-content:space-between;">
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <div style="width:56px;height:56px;border-radius:12px;overflow:hidden;background:#0b1117;">
                                        <img src="{% static 'img/logo-square-1024.png' %}" alt="App icon" style="width:100%;height:100%;object-fit:cover;display:block;">
                                    </div>
                                    <div>
                                        <div style="font-weight:800;">LinkHash</div>
                                        <div style="font-size:12px; color:#9fb0aa;">Marketing</div>
                                        <div style="font-size:12px; margin-top:2px;">
                                            â˜…â˜…â˜…â˜…â˜†
                                            <span style="opacity:.75;">4.8 â€¢ 1K+ reviews</span>
                                        </div>
                                    </div>
                                </div>
                                <button class="btn" type="button">Install</button>
                            </div>
                            <div style="display:flex; gap:6px; margin:10px 0;">
                                <div style="height:110px; flex:1; border-radius:12px; overflow:hidden; background:#0b1117;">
                                    <img src="{% static 'img/logo-square-1024.png' %}" alt="s1" style="width:100%;height:100%;object-fit:cover;display:block;">
                                </div>
                                <div style="height:110px; flex:1; border-radius:12px; overflow:hidden; background:#0b1117;">
                                    <img src="{% static 'img/cards/bitcoin-close.jpg' %}" alt="s2" style="width:100%;height:100%;object-fit:cover;display:block;">
                                </div>
                                <div style="height:110px; flex:1; border-radius:12px; overflow:hidden; background:#0b1117;">
                                    <img src="{% static 'img/landing/twitter.png' %}" alt="s3" style="width:100%;height:100%;object-fit:cover;display:block;">
                                </div>
                            </div>
                            <div style="display:flex; gap:12px; border-bottom:1px solid #1d2836; margin-bottom:8px;">
                                <div style="padding:6px 0; font-weight:700; border-bottom:2px solid #23d16a;">About this app</div>
                                <div style="padding:6px 0; opacity:.8;">Reviews</div>
                                <div style="padding:6px 0; opacity:.8;">Privacy</div>
                            </div>
                            <div style="font-size:13px; color:#cfe0d8;">
                                Earn crypto for real actions across social, app reviews, and surveys. Rules and progress are public.
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Step 3: Survey with real question -->
                <div class="step">
                    <div class="reveal">
                        <h3>3) {% if meta.lang == 'ko' %}ê´‘ê³ ì£¼ ì„¤ë¬¸ì— ì‘ë‹µ{% elif meta.lang == 'ja' %}åºƒå‘Šä¸»ã®ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã«å›ç­”{% elif meta.lang == 'zh' %}å‚ä¸å¹¿å‘Šä¸»é—®å·{% else %}Answer a survey from one of our advertisers{% endif %}</h3>
                        <p>
                            {% if meta.lang == 'ko' %}
                ê´‘ê³ ì£¼ê°€ ì œì‹œí•œ ì£¼ì œÂ·ì œí’ˆÂ·ì˜ê²¬ì— ëŒ€í•œ ì„¤ë¬¸ì„ ì™„ë£Œí•˜ë©´ ìŠ¹ì¸ í›„ ì•”í˜¸í™”íê°€ ì§€ê¸‰ë©ë‹ˆë‹¤.
              {% elif meta.lang == 'ja' %}
                åºƒå‘Šä¸»ãŒæç¤ºã™ã‚‹ãƒˆãƒ”ãƒƒã‚¯ãƒ»è£½å“ãƒ»æ„è¦‹ã«é–¢ã™ã‚‹ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚’å®Œäº†ã€‚æ‰¿èªå¾Œã«æš—å·è³‡ç”£ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚
              {% elif meta.lang == 'zh' %}
                å®Œæˆå¹¿å‘Šä¸»æå‡ºçš„ä¸»é¢˜ã€äº§å“ã€è§‚ç‚¹ç›¸å…³é—®å·ã€‚å®¡æ ¸é€šè¿‡åå‘æ”¾åŠ å¯†è´§å¸ã€‚
              {% else %}
                Complete a survey about a topic, product, or opinion provided by advertisers. After approval, you earn crypto.
              {% endif %}
                        </p>
                    </div>
                    <div class="mini" aria-label="Survey form preview">
                        <div class="chrome">
                            <span class="dot red"></span>
                            <span class="dot yellow"></span>
                            <span class="dot green"></span>
                        </div>
                        <div class="body">
                            <div style="font-weight:800; margin-bottom:6px;">What is your year-end price forecast for ETH &amp; BMNR?</div>
                            <div class="form-row">
                                <div>
                                    <label>ETH price (USD)</label>
                                    <input type="number" placeholder="e.g. 4200">
                                </div>
                                <div>
                                    <label>BMNR price (USD)</label>
                                    <input type="number" placeholder="e.g. 1.25">
                                </div>
                            </div>
                            <div class="form-row">
                                <div>
                                    <label>Confidence (0â€“100)</label>
                                    <input
                                        type="number"
                                        min="0"
                                        max="100"
                                        placeholder="e.g. 70"
                                    >
                                </div>
                                <div>
                                    <label>Email (optional)</label>
                                    <input placeholder="alex@example.com">
                                </div>
                            </div>
                            <label>Reasoning (optional)</label>
                            <div style="width:100%; padding:10px 12px; border:1px solid #2a333f; border-radius:10px; background:#0b1117; color:#e6f1ee; font-size:13px; height:80px; display:flex; align-items:flex-start;">Key catalysts, risks, timelineâ€¦</div>
                            <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:10px;">
                                <button class="btn" type="button">Submit</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- ===== LIVE CAMPAIGNS ===== -->
        <section id="projects" class="section" style="padding-top:10px;">
            <div class="container">
                <div class="section-head">
                    <h2>{% if meta.lang == 'ko' %}ì§„í–‰ ì¤‘ ìº í˜ì¸{% elif meta.lang == 'ja' %}é–‹å‚¬ä¸­ã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³{% elif meta.lang == 'zh' %}è¿›è¡Œä¸­çš„æ´»åŠ¨{% else %}Live Campaigns{% endif %}</h2>
                    <a class="more-link" href="{% if meta.lang == 'ko' %}/ko/rewards/{% elif meta.lang == 'ja' %}/ja/rewards/{% elif meta.lang == 'zh' %}/zh/rewards/{% else %}/rewards/{% endif %}">
                        {% if meta.lang == 'ko' %}ë” ë³´ê¸°{% elif meta.lang == 'ja' %}ã‚‚ã£ã¨è¦‹ã‚‹{% elif meta.lang == 'zh' %}æŸ¥çœ‹æ›´å¤š{% else %}View more{% endif %}
                        <span aria-hidden="true">â†’</span>
                    </a>
                </div>
                <p class="lead">
                    {% if meta.lang == 'ko' %}ê°€ê²Œ êµ¬ê²½í•˜ë“¯ ê³¼ì œë¥¼ íƒìƒ‰í•˜ì„¸ìš” â€” ë¯¸ì…˜ ì„ íƒ, ì™„ë£Œ, ë³´ìƒ ìˆ˜ë ¹.{% elif meta.lang == 'ja' %}ã‚·ãƒ§ãƒƒãƒ—æ„Ÿè¦šã§ã‚¿ã‚¹ã‚¯ã‚’é¸ã‚“ã§ã€ã“ãªã—ã¦ã€å—ã‘å–ã‚‹ã€‚{% elif meta.lang == 'zh' %}åƒé€›å•†åº—ä¸€æ ·é€‰ä»»åŠ¡ã€åšä»»åŠ¡ã€é¢†å¥–åŠ±ã€‚{% else %}Browse tasks like a shop â€” pick a mission, complete it, claim rewards.{% endif %}
                </p>
                {% if projects and projects|length > 0 %}
                <div class="rail" aria-label="Live campaigns">
                    {% for c in projects %}
                    <div class="slide">
                        <article class="project-card">
                            <div class="thumb">
                                <img src="{{ c.image_url|default:'' }}" onerror="this.src='{% static 'img/cards/green-office.jpg' %}'" alt="">
                                <div class="task-badges">
                                    {% if c.has_visit %}
                                    <span class="task-badge visit">VISIT</span>
                                    {% endif %}
                  {% if c.has_link %}
                                    <span class="task-badge link">LINK</span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="body">
                                <h3>{{ c.title }}</h3>
                                <p>{{ c.summary }}</p>
                                <div class="meta">
                                    <div class="pill">
                                        <strong>{% if meta.lang == 'ko' %}í’€{% elif meta.lang == 'ja' %}ãƒ—ãƒ¼ãƒ«{% elif meta.lang == 'zh' %}å¥–åŠ±æ± {% else %}Pool{% endif %}</strong>
                                        &nbsp; {{ c.pool_usdt }} {{ c.currency|default:"USDT" }}
                                    </div>
                                    <div class="pill">
                                        <strong>{% if meta.lang == 'ko' %}ì°¸ì—¬ì{% elif meta.lang == 'ja' %}äººæ•°{% elif meta.lang == 'zh' %}å‚ä¸è€…{% else %}People{% endif %}</strong>
                                        &nbsp; {{ c.participants }}
                                    </div>
                                </div>
                                <div class="progress">
                                    <div class="bar" data-pct="{{ c.claimed_percent|default:0 }}"></div>
                                </div>
                                <div style="display:flex; justify-content:space-between; font-size:12px; color:#9fb0aa;">
                                    <span>{{ c.claimed_percent|default:0 }}% {% if meta.lang == 'ko' %}í´ë ˆì„{% elif meta.lang == 'ja' %}é”æˆ{% elif meta.lang == 'zh' %}å·²é¢†å–{% else %}claimed{% endif %}</span>
                                    <span>{{ c.start|date:"Y-m-d" }} â†’ {{ c.end|date:"Y-m-d" }}</span>
                                </div>
                                <div class="foot">
                                    <a class="btn" href="/rewards/{{ c.slug }}-{{ c.id }}/">{% if meta.lang == 'ko' %}ìì„¸íˆ{% elif meta.lang == 'ja' %}è©³ç´°{% elif meta.lang == 'zh' %}è¯¦æƒ…{% else %}Details{% endif %}</a>
                                </div>
                            </div>
                        </article>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-wrap" role="status" aria-live="polite">
                    <div class="msg">
                        {% if meta.lang == 'ko' %}í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ìº í˜ì¸ì´ ì—†ìŠµë‹ˆë‹¤.{% elif meta.lang == 'ja' %}ç¾åœ¨ã€é–‹å‚¬ä¸­ã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚{% elif meta.lang == 'zh' %}ç›®å‰æ²¡æœ‰è¿›è¡Œä¸­çš„æ´»åŠ¨ã€‚{% else %}No live campaigns yet.{% endif %}
                    </div>
                    <div class="hint">
                        {% if meta.lang == 'ko' %}ìƒˆ ìº í˜ì¸ì´ ê³§ ì—´ë¦½ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë‹¤ì‹œ í™•ì¸í•˜ê±°ë‚˜ ì•Œë¦¼ì„ êµ¬ë…í•˜ì„¸ìš”.{% elif meta.lang == 'ja' %}ã¾ã‚‚ãªãé–‹å§‹äºˆå®šã€‚å¾Œã§å†åº¦ã”ç¢ºèªãã ã•ã„ã€‚{% elif meta.lang == 'zh' %}æ–°çš„æ´»åŠ¨å³å°†ä¸Šçº¿ï¼Œè¯·ç¨åå†æ¥æŸ¥çœ‹ã€‚{% else %}New campaigns launch soon â€” check back shortly.{% endif %}
                    </div>
                </div>
                {% endif %}
            </div>
        </section>
        <!-- ===== PAST CAMPAIGNS ===== -->
        <section id="past-projects" class="section" style="padding-top:10px;">
            <div class="container">
                <div class="section-head">
                    <h2>{% if meta.lang == 'ko' %}ì§€ë‚œ ìº í˜ì¸{% elif meta.lang == 'ja' %}éå»ã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³{% elif meta.lang == 'zh' %}ä»¥å¾€æ´»åŠ¨{% else %}Past Campaigns{% endif %}</h2>
                    <a class="more-link" href="{% if meta.lang == 'ko' %}/ko/rewards/{% elif meta.lang == 'ja' %}/ja/rewards/{% elif meta.lang == 'zh' %}/zh/rewards/{% else %}/rewards/{% endif %}">
                        {% if meta.lang == 'ko' %}ì „ì²´ ë³´ê¸°{% elif meta.lang == 'ja' %}ã™ã¹ã¦è¦‹ã‚‹{% elif meta.lang == 'zh' %}å…¨éƒ¨æµè§ˆ{% else %}Browse all{% endif %}
                        <span aria-hidden="true">â†’</span>
                    </a>
                </div>
                <p class="lead">
                    {% if meta.lang == 'ko' %}ê³µê°œëœ ì§€í‘œë¡œ ìš´ì˜ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš” â€” ì¢‹ì€ ìº í˜ì¸ì˜ ì‚¬ë¡€ì…ë‹ˆë‹¤.{% elif meta.lang == 'ja' %}å…¬é–‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§æˆæœã‚’ç¢ºèªã€‚è‰¯ã„äº‹ä¾‹ã‚’ãƒã‚§ãƒƒã‚¯ã€‚{% elif meta.lang == 'zh' %}é€šè¿‡å…¬å¼€æŒ‡æ ‡æŸ¥çœ‹æˆæ•ˆâ€”â€”ä¼˜ç§€æ´»åŠ¨çš„æ ·æ¿ã€‚{% else %}Closed pools with public metrics â€” see what a good campaign looks like.{% endif %}
                </p>
                {% if past_projects and past_projects|length > 0 %}
                <div class="rail" aria-label="Past campaigns">
                    {% for c in past_projects %}
                    <div class="slide">
                        <article class="project-card">
                            <div class="thumb">
                                <img src="{{ c.image_url|default:'' }}" onerror="this.src='{% static 'img/cards/neon-city.jpg' %}'" alt="">
                                <div class="task-badges">
                                    {% if c.has_link %}
                                    <span class="task-badge link">LINK</span>
                                    {% endif %}
                  {% if c.has_visit %}
                                    <span class="task-badge visit">VISIT</span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="body">
                                <h3>{{ c.title }}</h3>
                                <p>{{ c.summary }}</p>
                                <div class="meta">
                                    <div class="pill">
                                        <strong>{% if meta.lang == 'ko' %}í’€{% elif meta.lang == 'ja' %}ãƒ—ãƒ¼ãƒ«{% elif meta.lang == 'zh' %}å¥–åŠ±æ± {% else %}Pool{% endif %}</strong>
                                        &nbsp; {{ c.pool_usdt }} {{ c.currency|default:"USDT" }}
                                    </div>
                                    <div class="pill">
                                        <strong>{% if meta.lang == 'ko' %}ì°¸ì—¬ì{% elif meta.lang == 'ja' %}äººæ•°{% elif meta.lang == 'zh' %}å‚ä¸è€…{% else %}People{% endif %}</strong>
                                        &nbsp; {{ c.participants }}
                                    </div>
                                </div>
                                <div class="progress">
                                    <div class="bar" data-pct="{{ c.claimed_percent|default:100 }}"></div>
                                </div>
                                <div style="display:flex; justify-content:space-between; font-size:12px; color:#9fb0aa;">
                                    <span>{{ c.claimed_percent|default:100 }}% {% if meta.lang == 'ko' %}í´ë ˆì„{% elif meta.lang == 'ja' %}é”æˆ{% elif meta.lang == 'zh' %}å·²é¢†å–{% else %}claimed{% endif %}</span>
                                    <span>{{ c.start|date:"Y-m-d" }} â†’ {{ c.end|date:"Y-m-d" }}</span>
                                </div>
                                <div class="foot">
                                    <a class="btn" href="/rewards/{{ c.slug }}-{{ c.id }}/">{% if meta.lang == 'ko' %}ìš”ì•½{% elif meta.lang == 'ja' %}ã‚µãƒãƒªãƒ¼{% elif meta.lang == 'zh' %}æ€»ç»“{% else %}Summary{% endif %}</a>
                                </div>
                            </div>
                        </article>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-wrap" role="status" aria-live="polite">
                    <div class="msg">
                        {% if meta.lang == 'ko' %}ì•„ì§ ì§€ë‚œ ìº í˜ì¸ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.{% elif meta.lang == 'ja' %}éå»ã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚{% elif meta.lang == 'zh' %}æš‚æ— ä»¥å¾€æ´»åŠ¨è®°å½•ã€‚{% else %}No past campaigns yet.{% endif %}
                    </div>
                    <div class="hint">
                        {% if meta.lang == 'ko' %}ì²« ìº í˜ì¸ì´ ì¢…ë£Œë˜ë©´ ì—¬ê¸°ì—ì„œ ìš”ì•½ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.{% elif meta.lang == 'ja' %}æœ€åˆã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãŒçµ‚äº†ã™ã‚‹ã¨ã€ã“ã“ã«æ¦‚è¦ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚{% elif meta.lang == 'zh' %}é¦–ä¸ªæ´»åŠ¨ç»“æŸåï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºæ€»ç»“ã€‚{% else %}Once your first campaign closes, summaries will appear here.{% endif %}
                    </div>
                </div>
                {% endif %}
            </div>
        </section>
        <!-- ===== FOOTER ===== -->
        <footer class="footer">
            <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
                <div>
                    Â©
                    <strong>LinkHash</strong>
                </div>
                <div style="opacity:.7">
                    {% if meta.lang == 'ko' %}í™”ì´íŠ¸í–‡ ë°±ë§í¬ Â· íˆ¬ëª…í•œ ë¦¬ì›Œë“œ{% elif meta.lang == 'ja' %}ãƒ›ãƒ¯ã‚¤ãƒˆãƒãƒƒãƒˆè¢«ãƒªãƒ³ã‚¯ãƒ»é€æ˜ãªå ±é…¬{% elif meta.lang == 'zh' %}ç™½å¸½å¤–é“¾ Â· é€æ˜å¥–åŠ±{% else %}White-hat backlinks Â· Transparent rewards{% endif %}
                </div>
            </div>
        </footer>
        <!-- ===== JS: progress/reveal + wallet + language ===== -->
    </body>
    <!-- 1) Progress / reveal (unchanged from your page) -->
    <!-- 1) Progress / reveal (unchanged) -->
    <script>
// Progress bars (animate when visible)
const barsObserver = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      const b = e.target;
      const target = (b.dataset.pct ? b.dataset.pct : b.style.width || '0').toString().replace('%','');
      b.style.transition = 'width 900ms cubic-bezier(.2,1,.22,1)';
      requestAnimationFrame(()=> b.style.width = (target ? target : '0') + '%');
      barsObserver.unobserve(b);
    }
  });
},{ threshold:.3 });
document.querySelectorAll('.progress .bar').forEach(el=>barsObserver.observe(el));

// Reveal animations
const revealObserver = new IntersectionObserver((entries)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      entry.target.classList.add('in');
      if(entry.target.classList.contains('mini')){
        entry.target.classList.add('pop');
        entry.target.querySelectorAll('.progress .bar').forEach(b=>{
          const w = b.style.width || '60%';
          b.style.width = '0%';
          b.style.transition = 'width 900ms cubic-bezier(.2,1,.22,1) 120ms';
          requestAnimationFrame(()=> b.style.width = w);
        });
      }
      revealObserver.unobserve(entry.target);
    }
  });
},{ threshold:.25 });
document.querySelectorAll('.reveal, .mini').forEach(el=>revealObserver.observe(el));
    </script>
    <!-- 2) MetaMask / EIP-1193 login (no WalletConnect) -->
    <script>
/* ---------- Config ---------- */
const REQUIRED_CHAIN_ID_HEX = '0x1'; // Ethereum mainnet (optional enforcement)

/* ---------- Helpers ---------- */
const isAndroid = /Android/i.test(navigator.userAgent);
const isIOS     = /iPhone|iPad|iPod/i.test(navigator.userAgent);
const isMobile  = isAndroid || isIOS;

function openInMetaMaskApp(){
  // Re-open current URL inside MetaMaskâ€™s in-app browser
  const dappPath = window.location.host + window.location.pathname + window.location.search;
  window.location.href = 'https://metamask.app.link/dapp/' + dappPath;
}

// Read csrftoken from cookie (Django default name "csrftoken")
function getCSRFCookie(){
  const name = 'csrftoken';
  const cookies = document.cookie ? document.cookie.split('; ') : [];
  for (const c of cookies){
    const [k, v] = c.split('=');
    if (k === name) return decodeURIComponent(v || '');
  }
  return '';
}

async function apiGet(url){
  const res  = await fetch(url, { credentials:'include' });
  let data   = {};
  try{ data = await res.json(); }catch(_){}
  return { ok: res.ok, status: res.status, ...data };
}

async function apiPost(url, body){
  const res  = await fetch(url, {
    method:'POST',
    credentials:'include',
    headers:{
      'Content-Type':'application/json',
      'X-Requested-With':'fetch',
      'X-CSRFToken': getCSRFCookie(),   // <-- IMPORTANT for Django CSRF
    },
    body: JSON.stringify(body || {})
  });
  let data = {};
  try{ data = await res.json(); }catch(_){}
  return { ok: res.ok, status: res.status, ...data };
}

function getInjectedProvider(){
  if (window.ethereum) return window.ethereum;
  if (window.ethereum && Array.isArray(window.ethereum.providers)){
    const mm = window.ethereum.providers.find(p => p.isMetaMask);
    return mm || window.ethereum.providers[0];
  }
  return null;
}

async function ensureChain(eth, desiredHex){
  if (!eth || !desiredHex) return;
  try{
    const current = await eth.request({ method: 'eth_chainId' });
    if (current && current.toLowerCase() === desiredHex.toLowerCase()) return;
    try{
      await eth.request({ method:'wallet_switchEthereumChain', params:[{ chainId: desiredHex }] });
    }catch(e){
      if (e && (e.code === 4902 || e.code === -32603) && desiredHex === '0x1'){
        await eth.request({
          method:'wallet_addEthereumChain',
          params:[{
            chainId:'0x1',
            chainName:'Ethereum Mainnet',
            nativeCurrency:{ name:'Ether', symbol:'ETH', decimals:18 },
            rpcUrls:['https://rpc.ankr.com/eth'],
            blockExplorerUrls:['https://etherscan.io']
          }]
        });
      }
    }
  }catch(_){}
}

/* ---------- Public API (called by your header buttons) ---------- */
let _isConnecting = false;

async function connectWallet(){
  if (_isConnecting) return;
  _isConnecting = true;

  const btn  = document.querySelector('.mnav .btn:not(.danger)');
  const prev = btn ? btn.textContent : '';
  if (btn) { btn.disabled = true; btn.textContent = 'Connectingâ€¦'; }

  try{
    const eth = getInjectedProvider();
    if (!eth){
      if (isMobile){
        if (confirm('MetaMask not detected in this browser.\nOpen this page inside the MetaMask app?')){
          openInMetaMaskApp();
        }
      }else{
        window.open('https://metamask.io/download/', '_blank', 'noopener');
        alert('Please install MetaMask, then click Wallet again.');
      }
      return;
    }

    await ensureChain(eth, REQUIRED_CHAIN_ID_HEX);

    // Request accounts
    const accounts = await eth.request({ method:'eth_requestAccounts' });
    const address  = accounts && accounts[0];
    if (!address) throw new Error('No account selected');

    // 1) Get nonce + canonical message from backend
    const nonceRes = await apiGet(`/api/auth/nonce?address=${encodeURIComponent(address)}`);
    if (!nonceRes.ok){
      throw new Error(`Nonce fetch failed (${nonceRes.status}) ${nonceRes.error || ''}`.trim());
    }
    // Use the exact message returned by the server (must match _login_message on backend)
    const message = nonceRes.message;

    // 2) Sign message (MetaMask prefers [message, address])
    let signature;
    try{
      signature = await eth.request({ method:'personal_sign', params:[message, address] });
    }catch(e1){
      try{
        signature = await eth.request({ method:'personal_sign', params:[address, message] });
      }catch(e2){
        const hexMsg = '0x' + Array.from(new TextEncoder().encode(message))
          .map(b=>b.toString(16).padStart(2,'0')).join('');
        signature = await eth.request({ method:'personal_sign', params:[hexMsg, address] });
      }
    }

    // 3) Verify on backend (includes CSRF header)
    const verifyRes = await apiPost('/api/auth/verify', { address, signature, message });
    if (verifyRes && verifyRes.ok){
      window.location.reload();
      return;
    }
    // Surface server error message if present
    throw new Error(verifyRes.error || `Verify failed (${verifyRes.status || '??'})`);
  }catch(err){
    console.error(err);
    alert('Wallet login failed: ' + (err?.message || err));
  }finally{
    if (btn) { btn.disabled = false; btn.textContent = prev; }
    _isConnecting = false;
  }
}

async function logoutWallet(){
  try{
    const res = await apiPost('/api/auth/logout', {});
    if (!res.ok) throw new Error(res.error || `HTTP ${res.status}`);
    window.location.reload();
  }catch(err){
    console.error(err);
    alert('Logout failed: ' + (err?.message || err));
  }
}

// Keep UI in sync if page stays open
(function watchEthereum(){
  const eth = getInjectedProvider();
  if (!eth) return;
  try{
    eth.on && eth.on('accountsChanged', ()=> window.location.reload());
    eth.on && eth.on('chainChanged',   ()=> window.location.reload());
    eth.on && eth.on('disconnect',     ()=> console.log('ethereum disconnected'));
  }catch(_){}
})();

// Expose for header buttons
window.connectWallet = connectWallet;
window.logoutWallet  = logoutWallet;
    </script>
    <!-- 3) Mobile header (sheet + language switcher) -->
    <script>
(function(){
  // Sheet toggle
  const $toggle = document.getElementById('mnavToggle');
  const $sheet  = document.getElementById('mnavSheet');
  if($toggle && $sheet){
    const open = ()=>{ $sheet.hidden = false; $toggle.setAttribute('aria-expanded','true'); document.documentElement.style.overflow='hidden'; };
    const close= ()=>{ $sheet.hidden = true;  $toggle.setAttribute('aria-expanded','false'); document.documentElement.style.overflow=''; };
    $toggle.addEventListener('click', ()=> $sheet.hidden ? open() : close());
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') close(); });

    // Close sheet on outside click
    document.addEventListener('click', (e)=>{
      if($sheet.hidden) return;
      const within = e.target.closest('#mnavSheet') || e.target.closest('#mnavToggle');
      if(!within) close();
    });
  }

  // Language switcher
  const $wrap = document.getElementById('langSwitcher');
  if($wrap){
    const $btn  = $wrap.querySelector('.lang-btn');
    const $menu = $wrap.querySelector('.lang-menu');
    const current = ($wrap.dataset.current || 'en').toLowerCase();
    const flagEl = $btn.querySelector('.flag-emoji');
    const labelEl= $btn.querySelector('.label');
    const flagMap= { en:'ğŸ‡ºğŸ‡¸', ko:'ğŸ‡°ğŸ‡·', ja:'ğŸ‡¯ğŸ‡µ', zh:'ğŸ‡¨ğŸ‡³' };
    flagEl.textContent = flagMap[current] || 'ğŸ‡ºğŸ‡¸';

    function closeMenu(){ $wrap.classList.remove('open'); $btn.setAttribute('aria-expanded','false'); }
    function openMenu(){  $wrap.classList.add('open');    $btn.setAttribute('aria-expanded','true'); }

    $btn.addEventListener('click', (e)=>{ e.stopPropagation(); $wrap.classList.contains('open') ? closeMenu() : openMenu(); });
    document.addEventListener('click', closeMenu);
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeMenu(); });

    function pathFor(lang){
      const loc = window.location;
      const path = loc.pathname;
      const clean = path.replace(/^\/(ko|ja|zh)(\/|$)/, '/');
      const baseMap = { '/': true, '/rewards/': true, '/events/': true, '/leaderboard/': true };
      const isApply = /^\/rewards\/apply(\/(ko|ja|zh)\/)?$/.test(path);
      if(isApply){
        if(lang === 'en') return '/rewards/apply/?lang=en';
        return `/rewards/apply/${lang}/`;
      }
      if(baseMap[clean]){
        if(lang === 'en'){
          const q = new URLSearchParams(loc.search);
          q.set('lang','en');
          return clean + (q.toString() ? `?${q.toString()}` : '');
        }
        return clean === '/' ? `/${lang}/` : `/${lang}${clean}`;
      }
      const params = new URLSearchParams(loc.search);
      params.set('lang', lang);
      return path + (params.toString() ? `?${params.toString()}` : '');
    }

    $menu.querySelectorAll('.lang-item').forEach(li=>{
      li.addEventListener('click', ()=>{
        const lang  = li.getAttribute('data-lang');
        const emoji = li.getAttribute('data-flag') || '';
        flagEl.textContent = emoji;
        labelEl.textContent = lang==='ko' ? 'í•œêµ­ì–´' : lang==='ja' ? 'æ—¥æœ¬èª' : lang==='zh' ? 'ä¸­æ–‡' : 'English';
        closeMenu();
        const target = pathFor(lang);
        if(target) window.location.href = target;
      });
    });
  }
})();
    </script>
</html>
